(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[755],{68897:function(e,t,s){Promise.resolve().then(s.bind(s,60529)),Promise.resolve().then(s.bind(s,4851)),Promise.resolve().then(s.bind(s,66759))},28561:function(e,t,s){"use strict";var n=s(94630),r=s(57437);t.Z=(0,n.Z)((0,r.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V8c0-.55-.45-1-1-1s-1 .45-1 1v2H2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1zm9 4c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4"}),"PersonAddRounded")},4851:function(e,t,s){"use strict";s.d(t,{default:function(){return m}});var n=s(57437),r=s(2265),i=s(87349),l=s(1958),a=s(74183),c=s(18154),d=s(11608),o=s(25002),x=s(23345),h=s(59456),u=s(28561);async function p(e){return await fetch("".concat("https://api.euphoria-messenger.uz","/users/getOperatorsNotRop/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(e=>e.json())}async function j(e,t){return await fetch("".concat("https://api.euphoria-messenger.uz","/users/addRopOperator/").concat(e,"/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then(e=>e.json())}function m(e){let[t,s]=r.useState(!1),[m,Z]=r.useState(!1),[g,f]=r.useState(""),[v,y]=r.useState(""),[b,C]=r.useState(!0),[w,k]=r.useState([]),[P,S]=r.useState(!1);return r.useEffect(()=>{(async()=>{try{let t=await p(e.id);k(t.data),C(!1)}catch(e){console.error("Failed to fetch roles:",e),C(!1)}})()},[]),r.useEffect(()=>{P&&(s(!1),y(""),S(!1),f(""),window.location.reload())},[P]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{startDecorator:(0,n.jsx)(u.Z,{}),onClick:()=>s(!0),size:"sm",children:"Добавить"}),(0,n.jsx)(i.ZP,{open:t,onClose:()=>s(!1),children:(0,n.jsxs)(a.Z,{sx:{maxWidth:{xs:"94%",sm:"400px"},width:"100%",overflowY:"auto"},children:[(0,n.jsxs)(c.Z,{color:"primary",level:"h4",children:["Добавить оператора Ропу",(0,n.jsx)(u.Z,{sx:{fontSize:24},color:"primary"})]}),(0,n.jsxs)(d.Z,{spacing:2,children:[(0,n.jsx)(o.Z,{required:!0,children:"Выберите оператора"}),(0,n.jsx)(x.Z,{name:"operator",required:!0,sx:{minWidth:200},value:g,onChange:(e,t)=>f(t),disabled:b,children:b?(0,n.jsx)(h.Z,{value:"",disabled:!0,children:"Загрузка..."}):w.map(e=>(0,n.jsx)(h.Z,{value:e.id,children:e.name},e.id))}),(0,n.jsx)(l.Z,{type:"submit",size:"sm",onClick:t=>{t.preventDefault(),j(e.id,g).then(()=>{s(!1)}),window.location.reload()},children:"Добавить"})]})]})})]})}},66759:function(e,t,s){"use strict";s.d(t,{default:function(){return C}});var n=s(57437),r=s(2265),i=s(5481),l=s(1958),a=s(84673),c=s(53092),d=s(71779),o=s(66500),x=s(36164),h=s(55075),u=s(79335),p=s(32271),j=s(96703),m=s(64233),Z=s(12428),g=s(59456),f=s(36766),v=s(34641),y=s(23345),b=s(75339);function C(e){let{rop_id:t,users:s}=e,[C,w]=(0,r.useState)(""),[k,P]=(0,r.useState)(s),[S,z]=(0,r.useState)(1),[T,F]=(0,r.useState)(10),[D,I]=(0,r.useState)("asc"),E=e=>{z(e)},N=Math.max(1,Math.ceil((k?k.length:1)/T));return r.useEffect(()=>{fetch("".concat("https://api.euphoria-messenger.uz","/users/getRops"),{credentials:"include"}).then(e=>e.json()).then(e=>{P(e.data)})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{className:"SearchAndFilters-tabletUp",sx:{borderRadius:"sm",py:2,display:{xs:"none",sm:"flex"},flexWrap:"wrap",gap:1.5,"& > *":{minWidth:{xs:"120px",md:"160px"}}},children:(0,n.jsx)(a.Z,{sx:{flex:1},size:"sm",children:(0,n.jsx)(c.ZP,{size:"sm",placeholder:"Поиск пользователей",startDecorator:(0,n.jsx)(u.Z,{}),value:C,onChange:e=>{let t=e.target.value.toLowerCase();w(t),P(k.filter(e=>e.name.toLowerCase().includes(t)||e.login.toLowerCase().includes(t)||e.phoneNumber.toLowerCase().includes(t))),z(1)}})})}),(0,n.jsx)(o.Z,{className:"OrderTableContainer",variant:"outlined",sx:{display:{xs:"none",sm:"initial"},width:"100%",borderRadius:"sm",flexShrink:1,overflow:"auto",minHeight:0},children:(0,n.jsxs)(d.Z,{"aria-labelledby":"tableTitle",stickyHeader:!0,stickyFooter:!0,hoverRow:!0,sx:{"--TableCell-headBackground":"var(--joy-palette-background-level1)","--Table-headerUnderlineThickness":"1px","--TableRow-hoverBackground":"var(--joy-palette-background-level1)","--TableCell-paddingY":"8px","--TableCell-paddingX":"8px"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{width:"6%",textAlign:"center",padding:"12px 6px"},children:(0,n.jsx)(Z.Z,{})}),(0,n.jsx)("th",{style:{width:200,padding:"16px 6px"},children:(0,n.jsx)(h.ZP,{children:"Имя"})}),(0,n.jsx)("th",{style:{width:200,padding:"16px 6px"},children:"Логин"}),(0,n.jsx)("th",{style:{width:200,padding:"16px 6px"},children:"Телефон"}),(0,n.jsx)("th",{style:{width:200,padding:"16px 6px"},children:(0,n.jsx)(h.ZP,{children:"Роль"})}),(0,n.jsx)("th",{style:{width:"15%",padding:"16px 6px"},children:"Дата создания"}),(0,n.jsx)("th",{style:{width:"4%",padding:"10px 6px",textAlign:"center"},children:(0,n.jsx)(p.Z,{})})]})}),(0,n.jsx)("tbody",{children:s&&s.map((e,s)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{textAlign:"center",width:120},children:s+1}),(0,n.jsx)("td",{children:(0,n.jsxs)(i.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,n.jsx)(f.Z,{size:"sm",fullname:e.name[0]}),(0,n.jsx)(h.ZP,{level:"body-xs",children:e.name})]})}),(0,n.jsx)("td",{children:(0,n.jsx)(i.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingRight:"24px"},children:(0,n.jsx)(h.ZP,{level:"body-xs",children:e.login})})}),(0,n.jsx)("td",{children:(0,n.jsx)(h.ZP,{level:"body-xs",children:e.phoneNumber})}),(0,n.jsx)("td",{children:(0,n.jsx)(h.ZP,{level:"body-xs",children:e.role})}),(0,n.jsx)("td",{children:(0,n.jsx)(h.ZP,{level:"body-xs",children:e.created_at.slice(0,10)})}),(0,n.jsx)("td",{style:{textAlign:"center"},children:(0,n.jsx)(b.Z,{id:"".concat(t,"/").concat(e.id),url:"users/removeRopOperator",canDelete:!0})})]},s))})]})}),(0,n.jsxs)(i.Z,{className:"Pagination",sx:{pt:2,gap:1,display:{xs:"none",md:"flex"},justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,borderTop:"1px solid #ccc",p:2},children:[(0,n.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(h.ZP,{children:"Показать:"}),(0,n.jsx)(y.Z,{size:"sm",value:T,defaultValue:25,onChange:(e,t)=>{F(parseInt(String(t),10)),z(1)},indicator:(0,n.jsx)(v.Z,{}),sx:{ml:2,minWidth:80},children:[5,10,25,50].map(e=>(0,n.jsx)(g.Z,{value:e,children:e},e))})]}),(0,n.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(l.Z,{size:"sm",variant:"outlined",color:"neutral",startDecorator:(0,n.jsx)(m.Z,{}),onClick:()=>E(S-1),disabled:1===S,children:"До"}),(0,n.jsx)(i.Z,{sx:{mx:2,display:"flex",alignItems:"center",gap:1},children:Array.from({length:N},(e,t)=>t+1).slice(0,10).map(e=>(0,n.jsx)(x.ZP,{size:"sm",variant:e===S?"solid":"outlined",color:"neutral",onClick:()=>E(e),children:e},e))}),(0,n.jsx)(l.Z,{size:"sm",variant:"outlined",color:"neutral",endDecorator:(0,n.jsx)(j.Z,{}),onClick:()=>E(S+1),disabled:S===N,children:"После"})]})]})]})}},36766:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(57437);s(2265);var r=s(87505),i=s(18467);let l="abcdefghijklmnopqrstuvwxyzабвгдеёжзийклмнопрстуфхцчшщьыэюя".split(""),a=e=>{let t=e.charCodeAt(0);return"#".concat((16777216+(13*t%200+55<<16)+(37*t%200+55<<8)+(61*t%200+55)).toString(16).slice(1))},c=e=>{let t=parseInt(e.slice(1,3),16);return .2126*t+.7152*parseInt(e.slice(3,5),16)+.0722*parseInt(e.slice(5,7),16)<128};function d(e){let{online:t=!1,fullname:s="",status:d,...o}=e,x=(e=>{if(!e)return"#CCCCCC";let t=e[0].toLowerCase();return l.includes(t)?a(t):"#CCCCCC"})(s),h=c(x)?"#FFFFFF":"#000000";return(0,n.jsx)("div",{children:d?(0,n.jsx)(r.Z,{color:"UserStatusOnline"===d.className?"success":"neutral",variant:t?"solid":"soft",size:"sm",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeInset:"4px 4px",children:(0,n.jsx)(i.Z,{...o,sx:{bgcolor:x,color:h},children:s[0]||""})}):(0,n.jsx)(i.Z,{...o,sx:{bgcolor:x,color:h},children:s[0]||""})})}},75339:function(e,t,s){"use strict";s.d(t,{Z:function(){return v}});var n=s(57437),r=s(2265),i=s(1958),l=s(87349),a=s(36164),c=s(74183),d=s(18154),o=s(23824),x=s(17925),h=s(81630),u=s(98897),p=s(55972),j=s(31469),m=s(50074),Z=s(75186),g=s(2662),f=s(76672);function v(e){let[t,s]=r.useState(!1),[v,y]=r.useState(!1),b=()=>{if(!e.canDelete){Z.ZP.error("Нельзя удалить этот элемент");return}s(!0)},C=()=>{fetch("".concat("https://api.euphoria-messenger.uz","/").concat(e.url,"/").concat(e.id),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(t=>{if(t.ok)return e.deleteCallback?(e.deleteCallback(e.id),Z.ZP.success("Успешно удалено"),s(!1)):(Z.ZP.success("Успешно удалено"),window.location.reload()),t.json();Z.ZP.error("Ошибка при удалении"),window.location.reload()})};return(0,n.jsxs)(n.Fragment,{children:[e.isMaterial?(0,n.jsx)(g.Z,{size:"small",onClick:()=>b(),children:e.canDelete?(0,n.jsx)(f.Z,{}):(0,n.jsx)(m.Z,{})}):(0,n.jsx)(a.ZP,{size:"sm",color:"danger",onClick:()=>b(),children:e.canDelete?(0,n.jsx)(j.Z,{}):(0,n.jsx)(m.Z,{})}),(0,n.jsx)(l.ZP,{"aria-labelledby":"modal-title","aria-describedby":"modal-desc",open:t,onClose:()=>s(!1),sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:v?(0,n.jsx)(c.Z,{variant:"outlined",role:"alertdialog",children:(0,n.jsx)(u.Z,{color:"danger",variant:"soft"})}):(0,n.jsxs)(c.Z,{variant:"outlined",role:"alertdialog",color:"danger",children:[(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(p.Z,{}),"Вы уверены, что хотите удалить?"]}),(0,n.jsx)(o.Z,{}),e.dangerText&&(0,n.jsx)(x.Z,{children:e.dangerText}),(0,n.jsxs)(h.Z,{buttonFlex:2,children:[(0,n.jsx)(i.Z,{variant:"solid",color:"danger",onClick:()=>{y(!0),C()},children:"Да"}),(0,n.jsx)(i.Z,{variant:"solid",color:"primary",onClick:()=>s(!1),children:"Нет"})]})]})})]})}}},function(e){e.O(0,[420,529,630,186,657,971,117,744],function(){return e(e.s=68897)}),_N_E=e.O()}]);