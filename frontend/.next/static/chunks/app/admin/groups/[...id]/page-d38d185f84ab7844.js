(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[677],{30638:function(e,n,s){Promise.resolve().then(s.bind(s,60529)),Promise.resolve().then(s.bind(s,49965)),Promise.resolve().then(s.bind(s,93376))},28561:function(e,n,s){"use strict";var t=s(94630),l=s(57437);n.Z=(0,t.Z)((0,l.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V8c0-.55-.45-1-1-1s-1 .45-1 1v2H2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1zm9 4c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4"}),"PersonAddRounded")},49965:function(e,n,s){"use strict";s.d(n,{default:function(){return m}});var t=s(57437),l=s(2265),r=s(87349),i=s(1958),a=s(74183),c=s(18154),d=s(11608),o=s(25002),x=s(23345),h=s(59456),u=s(28561);async function p(){return await fetch("".concat("https://euphoria-messenger.uz:4000","/admin/getAllUsers"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",cache:"no-cache"}).then(e=>e.json())}async function j(e,n){return await fetch("".concat("https://euphoria-messenger.uz:4000","/groups/addUser/").concat(e,"/").concat(n),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then(e=>e.json())}function m(e){let[n,s]=l.useState(!1),[m,Z]=l.useState(!1),[g,f]=l.useState(""),[v,y]=l.useState(""),[b,C]=l.useState(!0),[w,k]=l.useState([]),[P,S]=l.useState(!1);return l.useEffect(()=>{(async()=>{try{let e=await p();k(e),C(!1)}catch(e){console.error("Failed to fetch roles:",e),C(!1)}})()},[]),l.useEffect(()=>{P&&(s(!1),y(""),S(!1),f(""),window.location.reload())},[P]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{startDecorator:(0,t.jsx)(u.Z,{}),onClick:()=>s(!0),size:"sm",children:"Добавить"}),(0,t.jsx)(r.ZP,{open:n,onClose:()=>s(!1),children:(0,t.jsxs)(a.Z,{sx:{maxWidth:{xs:"94%",sm:"400px"},width:"100%",overflowY:"auto"},children:[(0,t.jsxs)(c.Z,{color:"primary",level:"h4",children:["Добавить пользователя в группу",(0,t.jsx)(u.Z,{sx:{fontSize:24},color:"primary"})]}),(0,t.jsxs)(d.Z,{spacing:2,children:[(0,t.jsx)(o.Z,{required:!0,children:"Выберите оператора"}),(0,t.jsx)(x.Z,{name:"operator",required:!0,sx:{minWidth:200},value:g,onChange:(e,n)=>f(n),disabled:b,children:b?(0,t.jsx)(h.Z,{value:"",disabled:!0,children:"Загрузка..."}):w&&w.map(e=>(0,t.jsx)(h.Z,{value:e.id,children:e.name},e.id))}),(0,t.jsx)(i.Z,{type:"submit",size:"sm",onClick:n=>{n.preventDefault(),j(e.id,g).then(()=>{s(!1)}),window.location.reload()},children:"Добавить"})]})]})})]})}},93376:function(e,n,s){"use strict";s.d(n,{default:function(){return C}});var t=s(57437),l=s(2265),r=s(5481),i=s(1958),a=s(84673),c=s(53092),d=s(71779),o=s(66500),x=s(36164),h=s(55075),u=s(79335),p=s(32271),j=s(96703),m=s(64233),Z=s(12428),g=s(59456),f=s(36766),v=s(34641),y=s(23345),b=s(75339);function C(e){let{group_id:n,users:s}=e,[C,w]=(0,l.useState)(""),[k,P]=(0,l.useState)(s),[S,z]=(0,l.useState)(1),[T,F]=(0,l.useState)(10),[D,I]=(0,l.useState)("asc"),A=e=>{z(e)},E=Math.max(1,Math.ceil((k?k.length:1)/T));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{className:"SearchAndFilters-tabletUp",sx:{borderRadius:"sm",py:2,display:{xs:"none",sm:"flex"},flexWrap:"wrap",gap:1.5,"& > *":{minWidth:{xs:"120px",md:"160px"}}},children:(0,t.jsx)(a.Z,{sx:{flex:1},size:"sm",children:(0,t.jsx)(c.ZP,{size:"sm",placeholder:"Поиск пользователей",startDecorator:(0,t.jsx)(u.Z,{}),value:C,onChange:e=>{let n=e.target.value.toLowerCase();w(n),P(k.filter(e=>e.name.toLowerCase().includes(n)||e.login.toLowerCase().includes(n)||e.phoneNumber.toLowerCase().includes(n))),z(1)}})})}),(0,t.jsx)(o.Z,{className:"OrderTableContainer",variant:"outlined",sx:{display:{xs:"none",sm:"initial"},width:"100%",borderRadius:"sm",flexShrink:1,overflow:"auto",minHeight:0},children:(0,t.jsxs)(d.Z,{"aria-labelledby":"tableTitle",stickyHeader:!0,stickyFooter:!0,hoverRow:!0,sx:{"--TableCell-headBackground":"var(--joy-palette-background-level1)","--Table-headerUnderlineThickness":"1px","--TableRow-hoverBackground":"var(--joy-palette-background-level1)","--TableCell-paddingY":"8px","--TableCell-paddingX":"8px"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{width:"6%",textAlign:"center",padding:"12px 6px"},children:(0,t.jsx)(Z.Z,{})}),(0,t.jsx)("th",{style:{width:200,padding:"16px 6px"},children:(0,t.jsx)(h.ZP,{children:"Имя"})}),(0,t.jsx)("th",{style:{width:200,padding:"16px 6px"},children:"Логин"}),(0,t.jsx)("th",{style:{width:200,padding:"16px 6px"},children:"Телефон"}),(0,t.jsx)("th",{style:{width:200,padding:"16px 6px"},children:(0,t.jsx)(h.ZP,{children:"Роль"})}),(0,t.jsx)("th",{style:{width:"15%",padding:"16px 6px"},children:"Дата создания"}),(0,t.jsx)("th",{style:{width:"6%",padding:"10px 6px",textAlign:"center"},children:(0,t.jsx)(p.Z,{})})]})}),(0,t.jsx)("tbody",{children:s&&s.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{textAlign:"center",width:120},children:s+1}),(0,t.jsx)("td",{children:(0,t.jsxs)(r.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,t.jsx)(f.Z,{size:"sm",fullname:e.name[0]}),(0,t.jsx)(h.ZP,{level:"body-xs",children:e.name})]})}),(0,t.jsx)("td",{children:(0,t.jsx)(r.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingRight:"24px"},children:(0,t.jsx)(h.ZP,{level:"body-xs",children:e.login})})}),(0,t.jsx)("td",{children:(0,t.jsx)(h.ZP,{level:"body-xs",children:e.phoneNumber})}),(0,t.jsx)("td",{children:(0,t.jsx)(h.ZP,{level:"body-xs",children:e.role})}),(0,t.jsx)("td",{children:(0,t.jsx)(h.ZP,{level:"body-xs",children:e.created_at.slice(0,10)})}),(0,t.jsx)("td",{style:{textAlign:"center"},children:(0,t.jsx)(b.Z,{id:"".concat(n,"/").concat(e.id),url:"groups/removeGroupUser",canDelete:!0})})]},s))})]})}),(0,t.jsxs)(r.Z,{className:"Pagination",sx:{pt:2,gap:1,display:{xs:"none",md:"flex"},justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,borderTop:"1px solid #ccc",p:2},children:[(0,t.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(h.ZP,{children:"Показать:"}),(0,t.jsx)(y.Z,{size:"sm",value:T,defaultValue:25,onChange:(e,n)=>{F(parseInt(String(n),10)),z(1)},indicator:(0,t.jsx)(v.Z,{}),sx:{ml:2,minWidth:80},children:[5,10,25,50].map(e=>(0,t.jsx)(g.Z,{value:e,children:e},e))})]}),(0,t.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(i.Z,{size:"sm",variant:"outlined",color:"neutral",startDecorator:(0,t.jsx)(m.Z,{}),onClick:()=>A(S-1),disabled:1===S,children:"До"}),(0,t.jsx)(r.Z,{sx:{mx:2,display:"flex",alignItems:"center",gap:1},children:Array.from({length:E},(e,n)=>n+1).slice(0,10).map(e=>(0,t.jsx)(x.ZP,{size:"sm",variant:e===S?"solid":"outlined",color:"neutral",onClick:()=>A(e),children:e},e))}),(0,t.jsx)(i.Z,{size:"sm",variant:"outlined",color:"neutral",endDecorator:(0,t.jsx)(j.Z,{}),onClick:()=>A(S+1),disabled:S===E,children:"После"})]})]})]})}},36766:function(e,n,s){"use strict";s.d(n,{Z:function(){return d}});var t=s(57437);s(2265);var l=s(87505),r=s(18467);let i="abcdefghijklmnopqrstuvwxyzабвгдеёжзийклмнопрстуфхцчшщьыэюя".split(""),a=e=>{let n=e.charCodeAt(0);return"#".concat((16777216+(13*n%200+55<<16)+(37*n%200+55<<8)+(61*n%200+55)).toString(16).slice(1))},c=e=>{let n=parseInt(e.slice(1,3),16);return .2126*n+.7152*parseInt(e.slice(3,5),16)+.0722*parseInt(e.slice(5,7),16)<128};function d(e){let{online:n=!1,fullname:s="",status:d,...o}=e,x=(e=>{if(!e)return"#CCCCCC";let n=e[0].toLowerCase();return i.includes(n)?a(n):"#CCCCCC"})(s),h=c(x)?"#FFFFFF":"#000000";return(0,t.jsx)("div",{children:d?(0,t.jsx)(l.Z,{color:"UserStatusOnline"===d.className?"success":"neutral",variant:n?"solid":"soft",size:"sm",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeInset:"4px 4px",children:(0,t.jsx)(r.Z,{...o,sx:{bgcolor:x,color:h},children:s[0]||""})}):(0,t.jsx)(r.Z,{...o,sx:{bgcolor:x,color:h},children:s[0]||""})})}},75339:function(e,n,s){"use strict";s.d(n,{Z:function(){return v}});var t=s(57437),l=s(2265),r=s(1958),i=s(87349),a=s(36164),c=s(74183),d=s(18154),o=s(23824),x=s(17925),h=s(81630),u=s(98897),p=s(55972),j=s(31469),m=s(50074),Z=s(75186),g=s(2662),f=s(76672);function v(e){let[n,s]=l.useState(!1),[v,y]=l.useState(!1),b=()=>{if(!e.canDelete){Z.ZP.error("Нельзя удалить этот элемент");return}s(!0)},C=()=>{fetch("".concat("https://euphoria-messenger.uz:4000","/").concat(e.url,"/").concat(e.id),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(n=>{if(n.ok)return e.deleteCallback?(e.deleteCallback(e.id),Z.ZP.success("Успешно удалено"),s(!1)):(Z.ZP.success("Успешно удалено"),window.location.reload()),n.json();Z.ZP.error("Ошибка при удалении"),window.location.reload()})};return(0,t.jsxs)(t.Fragment,{children:[e.isMaterial?(0,t.jsx)(g.Z,{size:"small",onClick:()=>b(),children:e.canDelete?(0,t.jsx)(f.Z,{}):(0,t.jsx)(m.Z,{})}):(0,t.jsx)(a.ZP,{size:"sm",color:"danger",onClick:()=>b(),children:e.canDelete?(0,t.jsx)(j.Z,{}):(0,t.jsx)(m.Z,{})}),(0,t.jsx)(i.ZP,{"aria-labelledby":"modal-title","aria-describedby":"modal-desc",open:n,onClose:()=>s(!1),sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:v?(0,t.jsx)(c.Z,{variant:"outlined",role:"alertdialog",children:(0,t.jsx)(u.Z,{color:"danger",variant:"soft"})}):(0,t.jsxs)(c.Z,{variant:"outlined",role:"alertdialog",color:"danger",children:[(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(p.Z,{}),"Вы уверены, что хотите удалить?"]}),(0,t.jsx)(o.Z,{}),e.dangerText&&(0,t.jsx)(x.Z,{children:e.dangerText}),(0,t.jsxs)(h.Z,{buttonFlex:2,children:[(0,t.jsx)(r.Z,{variant:"solid",color:"danger",onClick:()=>{y(!0),C()},children:"Да"}),(0,t.jsx)(r.Z,{variant:"solid",color:"primary",onClick:()=>s(!1),children:"Нет"})]})]})})]})}}},function(e){e.O(0,[420,529,630,186,657,971,117,744],function(){return e(e.s=30638)}),_N_E=e.O()}]);