(()=>{var e={};e.id=3,e.ids=[3],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},86498:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(79505),r(94564),r(95537),r(90996);var s=r(30170),a=r(45002),n=r(83876),l=r.n(n),i=r(66299),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,79505)),"C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\admin\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,94564)),"C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,95537)),"C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\admin\\page.tsx"],u="/admin/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},59848:(e,t,r)=>{Promise.resolve().then(r.bind(r,9662)),Promise.resolve().then(r.bind(r,64478)),Promise.resolve().then(r.bind(r,28455))},82932:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"M20 7h-5V4c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2M9 12c.83 0 1.5.67 1.5 1.5S9.83 15 9 15s-1.5-.67-1.5-1.5S8.17 12 9 12m3 6H6v-.75c0-1 2-1.5 3-1.5s3 .5 3 1.5zm1-9h-2V4h2zm5 7.5h-4V15h4zm0-3h-4V12h4z"}),"Badge")},50313:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1q-.15.15-.15.36M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"EditRounded")},8971:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"}),"KeyboardArrowLeft")},51e3:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRight")},65646:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"m20.68 9.27.01-.06c.16-.62-.3-1.21-.93-1.21H17l.7-2.79c.15-.62-.31-1.21-.94-1.21-.45 0-.83.3-.94.73L15 8h-4l.7-2.79c.15-.62-.31-1.21-.94-1.21-.45 0-.83.3-.94.73L9 8H5.76c-.45 0-.84.3-.94.73l-.02.06c-.15.62.31 1.21.94 1.21H8.5l-1 4H4.26c-.45 0-.83.3-.94.73l-.02.06c-.15.62.31 1.21.94 1.21H7l-.7 2.79c-.15.62.31 1.21.94 1.21.45 0 .83-.3.94-.73L9 16h4l-.7 2.79c-.15.62.31 1.21.94 1.21.45 0 .83-.3.94-.73L15 16h3.24c.45 0 .83-.3.94-.73l.01-.06c.15-.61-.31-1.21-.94-1.21H15.5l1-4h3.24c.45 0 .84-.3.94-.73M13.5 14h-4l1-4h4z"}),"NumbersRounded")},60787:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V8c0-.55-.45-1-1-1s-1 .45-1 1v2H2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1zm9 4c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4"}),"PersonAddRounded")},61272:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},35680:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"M19.5 12c0-.23-.01-.45-.03-.68l1.86-1.41c.4-.3.51-.86.26-1.3l-1.87-3.23c-.25-.44-.79-.62-1.25-.42l-2.15.91c-.37-.26-.76-.49-1.17-.68l-.29-2.31c-.06-.5-.49-.88-.99-.88h-3.73c-.51 0-.94.38-1 .88l-.29 2.31c-.41.19-.8.42-1.17.68l-2.15-.91c-.46-.2-1-.02-1.25.42L2.41 8.62c-.25.44-.14.99.26 1.3l1.86 1.41c-.02.22-.03.44-.03.67s.01.45.03.68l-1.86 1.41c-.4.3-.51.86-.26 1.3l1.87 3.23c.25.44.79.62 1.25.42l2.15-.91c.37.26.76.49 1.17.68l.29 2.31c.06.5.49.88.99.88h3.73c.5 0 .93-.38.99-.88l.29-2.31c.41-.19.8-.42 1.17-.68l2.15.91c.46.2 1 .02 1.25-.42l1.87-3.23c.25-.44.14-.99-.26-1.3l-1.86-1.41c.03-.23.04-.45.04-.68m-7.46 3.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5"}),"SettingsRounded")},92946:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"M16 17.01V11c0-.55-.45-1-1-1s-1 .45-1 1v6.01h-1.79c-.45 0-.67.54-.35.85l2.79 2.78c.2.19.51.19.71 0l2.79-2.78c.32-.31.09-.85-.35-.85zM8.65 3.35 5.86 6.14c-.32.31-.1.85.35.85H8V13c0 .55.45 1 1 1s1-.45 1-1V6.99h1.79c.45 0 .67-.54.35-.85L9.35 3.35c-.19-.19-.51-.19-.7 0"}),"SwapVertRounded")},69653:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"M12 6.5c2.76 0 5 2.24 5 5 0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24M2.71 3.16c-.39.39-.39 1.02 0 1.41l1.97 1.97C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l2.72 2.72c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41L4.13 3.16c-.39-.39-1.03-.39-1.42 0M12 16.5c-2.76 0-5-2.24-5-5 0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57 0 1.66 1.34 3 3 3 .2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5m2.97-5.33c-.15-1.4-1.25-2.49-2.64-2.64z"}),"VisibilityOffRounded")},93067:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(70531),a=r(97247);let n=(0,s.Z)((0,a.jsx)("path",{d:"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"VisibilityRounded")},64478:(e,t,r)=>{"use strict";r.d(t,{default:()=>Q});var s=r(97247),a=r(28964),n=r.n(a),l=r(32088),i=r(38833),o=r(55116),d=r(26339),c=r(86961),u=r(33453),p=r(76262),h=r(7413),x=r(61441),m=r(97242),j=r(60787),g=r(322),f=r(93067),Z=r(69653),y=r(82932),v=r(7208),b=r(76617),w=r(93665),P=r(73207),C=r(79488),S=r(68594),k=r(20650),z=r(67062),D=r(26147);let T="Input";function A(e){return(0,z.d)(T,e)}(0,D.s)(T,["root","formControl","focused","disabled","error","multiline","input","inputMultiline","inputTypeSearch","adornedStart","adornedEnd"]);var q=r(42596),E=r(28358),F=r(63574),M=r(38313);let R=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","endAdornment","error","id","multiline","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","startAdornment","value","type","rows","slotProps","slots","minRows","maxRows"],N=e=>{let{disabled:t,error:r,focused:s,formControlContext:a,multiline:n,startAdornment:l,endAdornment:i}=e;return(0,F.Z)({root:["root",t&&"disabled",r&&"error",s&&"focused",!!a&&"formControl",n&&"multiline",!!l&&"adornedStart",!!i&&"adornedEnd"],input:["input",t&&"disabled",n&&"multiline"]},(0,M.T)(A))},L=a.forwardRef(function(e,t){var r,a,n;let{"aria-describedby":l,"aria-label":i,"aria-labelledby":o,autoComplete:d,autoFocus:c,className:u,defaultValue:p,disabled:h,endAdornment:x,error:m,id:j,multiline:g=!1,name:f,onClick:Z,onChange:y,onKeyDown:v,onKeyUp:b,onFocus:w,onBlur:P,placeholder:z,readOnly:D,required:T,startAdornment:A,value:F,type:M,rows:L,slotProps:O={},slots:_={},minRows:H,maxRows:U}=e,V=(0,S.Z)(e,R),{getRootProps:W,getInputProps:B,focused:I,formControlContext:G,error:$,disabled:K}=(0,q.G)({disabled:h,defaultValue:p,error:m,onBlur:P,onClick:Z,onChange:y,onFocus:w,required:T,value:F}),Y=g?void 0:null!=M?M:"text",J=(0,C.Z)({},e,{disabled:K,error:$,focused:I,formControlContext:G,multiline:g,type:Y}),X=N(J),Q={"aria-describedby":l,"aria-label":i,"aria-labelledby":o,autoComplete:d,autoFocus:c,id:j,onKeyDown:v,onKeyUp:b,name:f,placeholder:z,readOnly:D,type:Y},ee=null!=(r=_.root)?r:"div",et=(0,E.y)({elementType:ee,getSlotProps:W,externalSlotProps:O.root,externalForwardedProps:V,additionalProps:{ref:t},ownerState:J,className:[X.root,u]}),er=g?null!=(a=_.textarea)?a:"textarea":null!=(n=_.input)?n:"input",es=(0,E.y)({elementType:er,getSlotProps:e=>B((0,C.Z)({},Q,e)),externalSlotProps:O.input,additionalProps:(0,C.Z)({rows:g?L:void 0},g&&!(0,k.X)(er)&&{minRows:L||H,maxRows:L||U}),ownerState:J,className:X.input});return(0,s.jsxs)(ee,(0,C.Z)({},et,{children:[A,(0,s.jsx)(er,(0,C.Z)({},es)),x]}))});var O=r(35149),_=r(69172);let H=(0,r(17269).Z)("MuiBox",["root"]),U=(0,_.Z)({defaultClassName:H.root,generateClassName:O.Z.generate});function V({separator:e,length:t,value:r,onChange:n}){let l=a.useRef(Array(t).fill(null)),i=e=>{let t=l.current[e];t?.focus()},o=e=>{let t=l.current[e];t?.select()},d=(e,s)=>{switch(/[0-9]/.test(e.key)||["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(e.key)||e.preventDefault(),e.key){case"ArrowUp":case"ArrowDown":case" ":e.preventDefault();break;case"ArrowLeft":e.preventDefault(),s>0&&(i(s-1),o(s-1));break;case"ArrowRight":e.preventDefault(),s<t-1&&(i(s+1),o(s+1));break;case"Delete":case"Backspace":e.preventDefault();let a=r.split("");a[s]="",n(a.join("")),s>0&&(i(s-1),o(s-1))}},c=(e,s)=>{let a=e.target.value;if(!/^\d*$/.test(a))return;let l=r.split(""),o=a[a.length-1];l[s]=o,n(l.join("")),""!==a&&s<t-1&&i(s+1)},u=(e,t)=>{o(t)},p=(e,s)=>{e.preventDefault();let a=e.clipboardData;if(a.types.includes("text/plain")){let e=a.getData("text/plain").replace(/\D/g,"");e=e.substring(0,t).trim();let l=r.split("");for(let r=s;r<t;r++){let t=e[r-s]??"";l[r]=t}n(l.join(""))}};return s.jsx(U,{sx:{display:"flex",gap:1,alignItems:"center"},children:Array(t).fill(null).map((n,i)=>(0,s.jsxs)(a.Fragment,{children:[s.jsx(L,{slots:{input:B},"aria-label":`Digit ${i+1} of OTP`,slotProps:{input:{ref:e=>{l.current[i]=e},onKeyDown:e=>d(e,i),onChange:e=>c(e,i),onClick:e=>u(e,i),onPaste:e=>p(e,i),value:r[i]??"",type:"tel",maxLength:1}}}),i===t-1?null:e]},i))})}function W(e){return s.jsx(U,{sx:{display:"flex",flexDirection:"column",gap:2,margin:"auto",my:2},children:s.jsx(V,{separator:s.jsx("span",{children:"-"}),value:e.otp,onChange:e.setOtp,length:5})})}let B=(0,r(63868).Z)("input")(({theme:e})=>`
  width: 40px;
  font-family: 'IBM Plex Sans', sans-serif;
  font-size: 0.875rem;
  font-weight: 400;
  line-height: 1.5;
  padding: 8px 0px;
  border-radius: 8px;
  text-align: center;
  color: ${"dark"===e.palette.mode?"#C7D0DD":"#303740"};
  background: ${"dark"===e.palette.mode?"#303740":"#fff"};
  border: 1px solid ${"dark"===e.palette.mode?"#434D5B":"#DAE2ED"};
  box-shadow: 0px 2px 4px ${"dark"===e.palette.mode?"rgba(0,0,0, 0.5)":"rgba(0,0,0, 0.05)"};

  &:hover {
    border-color: #3399FF;
  }

  &:focus {
    border-color: #3399FF;
    box-shadow: 0 0 0 3px ${"dark"===e.palette.mode?"#0072E5":"#80BFFF"};
  }

  &:focus-visible {
    outline: 0;
  }
`);var I=r(72411);async function G(e,t){return await fetch(`https://api.euphoria-messenger.uz/tg-auth/register/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({phoneNumber:t})}).then(e=>e.json())}function $(e){let[t,r]=n().useState(""),a=async()=>{if(!e.phoneNumber){I.ZP.error("Все поля обязательны");return}e.setOpen(!0);try{let t=await G(e.login,e.phoneNumber);t.message?I.ZP.success(t.message):I.ZP.error("Ошибка при создании пользователя")}catch(e){console.error("Failed to create user:",e),I.ZP.error("Ошибка при создании пользователя")}},u=async()=>{if(!t){I.ZP.error("Все поля обязательны");return}try{let r=await fetch(`https://api.euphoria-messenger.uz/tg-auth/verify/${e.login}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({phoneCode:t})}).then(e=>e.json());r.message?(e.setOpen(!1),e.setClose(!0),I.ZP.success(r.message)):I.ZP.error("Ошибка при создании пользователя")}catch(e){console.error("Failed to create user:",e),I.ZP.error("Ошибка при создании пользователя")}};return(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.Z,{"aria-label":"edit",color:"primary",size:"md",sx:{display:{xs:"none",sm:"unset"}},onClick:a,children:"Получить код"}),s.jsx(l.ZP,{open:e.open,children:(0,s.jsxs)(o.Z,{sx:{maxWidth:{xs:"94%",sm:"400px"},width:"100%",overflowY:"auto"},children:[s.jsx(d.Z,{color:"primary",level:"h4",children:"Введите код "}),(0,s.jsxs)(c.Z,{spacing:2,children:[s.jsx(w.Z,{sx:{textAlign:"center"},children:s.jsx(W,{otp:t,setOtp:r})}),s.jsx(i.Z,{type:"submit",color:"primary",fullWidth:!0,onClick:u,children:"Добавить"})]})]})})]})}let K=(0,r(70531).Z)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 15c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1m1-8h-2V7h2z"}),"InfoRounded");async function Y(e,t,r,s){return await fetch("https://api.euphoria-messenger.uz/users/create-user",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e,login:t,password:r,role:s})}).then(e=>e.json())}function J(e){let[t,r]=n().useState(""),[a,u]=n().useState(!1),p=async()=>{if(!e.name||!e.login||!e.password||!e.role){I.ZP.error("Все поля обязательны");return}try{let t=await Y(e.name,e.login,e.password,e.role);t.message?(I.ZP.success(t.message),e.setSubmitting(!0)):I.ZP.error("Ошибка при создании пользователя")}catch(e){console.error("Failed to create user:",e),I.ZP.error("Ошибка при создании пользователя")}};return(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.Z,{"aria-label":"edit",color:"primary",size:"md",onClick:p,children:"Добавить пользователя"}),s.jsx(l.ZP,{open:e.submitting,children:(0,s.jsxs)(o.Z,{sx:{maxWidth:{xs:"94%",sm:"400px"},width:"100%",overflowY:"auto"},children:[s.jsx(d.Z,{color:"primary",level:"h4",children:"Введите номер телефона"}),s.jsx(v.Z,{color:"success",variant:"soft",sx:{fontSize:14,fontWeight:600},startDecorator:s.jsx(K,{sx:{fontSize:24}}),children:s.jsx(b.ZP,{children:"На этот номер отправиться код !"})}),(0,s.jsxs)(c.Z,{spacing:2,children:[s.jsx(w.Z,{children:s.jsx(P.Z,{phone:t,setPhone:r})}),s.jsx($,{open:a,setOpen:u,login:e.login,phoneNumber:t,setClose:e.setClose})]})]})})]})}async function X(){return await fetch("https://api.euphoria-messenger.uz/roles/allNames",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(e=>e.json())}function Q(){let[e,t]=a.useState(!1),[r,n]=a.useState(!1),[v,b]=a.useState(""),[w,P]=a.useState(""),[C,S]=a.useState(""),[k,z]=a.useState(""),[D,T]=a.useState(!0),[A,q]=a.useState([]),[E,F]=a.useState(!1),[M,R]=a.useState(!1);return a.useEffect(()=>{(async()=>{try{let e=await X();q(e.data),T(!1)}catch(e){console.error("Failed to fetch roles:",e),T(!1)}})()},[]),a.useEffect(()=>{M&&(t(!1),F(!1),P(""),S(""),z(""),b(""),R(!1),window.location.reload())},[M]),(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.Z,{startDecorator:s.jsx(j.Z,{}),onClick:()=>t(!0),size:"sm",children:"Добавить"}),s.jsx(l.ZP,{open:e,onClose:()=>t(!1),children:(0,s.jsxs)(o.Z,{sx:{maxWidth:{xs:"94%",sm:"400px"},width:"100%",overflowY:"auto"},children:[(0,s.jsxs)(d.Z,{color:"primary",level:"h4",children:["Добавить пользователя",s.jsx(j.Z,{sx:{fontSize:24},color:"primary"})]}),(0,s.jsxs)(c.Z,{spacing:2,children:[s.jsx(u.Z,{required:!0,children:"Имя пользователя"}),s.jsx(p.ZP,{autoFocus:!0,required:!0,onChange:e=>P(e.target.value),value:w,endDecorator:s.jsx(y.Z,{})}),s.jsx(u.Z,{required:!0,children:"Логин"}),s.jsx(p.ZP,{required:!0,onChange:e=>S(e.target.value),value:C,endDecorator:s.jsx(g.Z,{})}),s.jsx(u.Z,{required:!0,children:"Пароль"}),s.jsx(p.ZP,{required:!0,onChange:e=>z(e.target.value),value:k,type:r?"text":"password",endDecorator:s.jsx(h.ZP,{variant:"plain","aria-label":r?"hide password":"show password",color:"neutral",size:"sm",onClick:()=>{n(!r)},children:r?s.jsx(f.Z,{}):s.jsx(Z.Z,{})})}),s.jsx(u.Z,{required:!0,children:"Выберите роль"}),s.jsx(x.Z,{name:"role",required:!0,sx:{minWidth:200},value:v,onChange:(e,t)=>b(t),disabled:D,children:D?s.jsx(m.Z,{value:"",disabled:!0,children:"Загрузка..."}):A.map(e=>s.jsx(m.Z,{value:e.name,children:e.name},e.id))}),s.jsx(J,{name:w,login:C,password:k,role:v,submitting:E,setSubmitting:F,setClose:R})]})]})})]})}},28455:(e,t,r)=>{"use strict";r.d(t,{default:()=>L});var s=r(97247),a=r(28964),n=r(71009),l=r(38833),i=r(93665),o=r(76262),d=r(9290),c=r(22690),u=r(7413),p=r(76617),h=r(61272),x=r(51e3),m=r(8971),j=r(35680),g=r(65646),f=r(97242),Z=r(76157),y=r(92946),v=r(61441),b=r(32088),w=r(55116),P=r(26339),C=r(86961),S=r(33453),k=r(60787),z=r(322),D=r(93067),T=r(69653),A=r(82932),q=r(72411),E=r(90412),F=r(50313);async function M(){return await fetch("https://api.euphoria-messenger.uz/roles/allNames",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(e=>e.json())}async function R(e,t,r,s,a){return await fetch(`https://api.euphoria-messenger.uz/users/update-user/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:t,login:r,password:s,role:a})}).then(e=>e.json())}function N(e){let[t,r]=a.useState(!1),[n,i]=a.useState(!1),[d,c]=a.useState(e.role),[p,h]=a.useState(e.name),[x,m]=a.useState(e.login),[j,g]=a.useState(""),[Z,y]=a.useState(!0),[N,L]=a.useState([]),[O,_]=a.useState(!1),[H,U]=a.useState(!1);return a.useEffect(()=>{(async()=>{try{let e=await M();L(e.data),y(!1)}catch(e){console.error("Failed to fetch roles:",e),y(!1)}})()},[]),a.useEffect(()=>{H&&(r(!1),_(!1),h(""),m(""),g(""),c(""),U(!1),window.location.reload())},[H]),(0,s.jsxs)(s.Fragment,{children:[s.jsx(u.ZP,{size:"sm",color:"primary",onClick:()=>r(!0),children:s.jsx(F.Z,{})}),s.jsx(b.ZP,{open:t,onClose:()=>r(!1),children:(0,s.jsxs)(w.Z,{sx:{maxWidth:{xs:"94%",sm:"400px"},width:"100%",overflowY:"auto"},children:[(0,s.jsxs)(P.Z,{color:"primary",level:"h4",children:["Изменить пользователя",s.jsx(k.Z,{sx:{fontSize:24},color:"primary"})]}),(0,s.jsxs)(C.Z,{spacing:2,children:[s.jsx(S.Z,{required:!0,children:"Имя пользователя"}),s.jsx(o.ZP,{autoFocus:!0,required:!0,onChange:e=>h(e.target.value),value:p,endDecorator:s.jsx(A.Z,{})}),s.jsx(S.Z,{required:!0,children:"Логин"}),s.jsx(o.ZP,{required:!0,onChange:e=>m(e.target.value),value:x,endDecorator:s.jsx(z.Z,{})}),s.jsx(S.Z,{required:!0,children:"Пароль"}),s.jsx(o.ZP,{required:!0,onChange:e=>g(e.target.value),value:j,type:n?"text":"password",endDecorator:s.jsx(u.ZP,{variant:"plain","aria-label":n?"hide password":"show password",color:"neutral",size:"sm",onClick:()=>{i(!n)},children:n?s.jsx(D.Z,{}):s.jsx(T.Z,{})})}),s.jsx(S.Z,{required:!0,children:"Выберите роль"}),s.jsx(v.Z,{name:"role",required:!0,sx:{minWidth:200},value:d,onChange:(e,t)=>c(t),disabled:Z,children:Z?s.jsx(f.Z,{value:"",disabled:!0,children:"Загрузка..."}):N.map(e=>s.jsx(f.Z,{value:e.name,children:e.name},e.id))}),s.jsx(l.Z,{onClick:async()=>{_(!0);try{await R(e.id,p,x,j,d),q.ZP.success("Пользователь успешно изменен"),U(!0)}catch(e){console.error("Failed to update user:",e),q.ZP.error("Не удалось изменить пользователя"),_(!1)}},disabled:O,endDecorator:O?s.jsx(E.Z,{}):null,children:"Изменить"})]})]})})]})}function L({users:e}){let[t,r]=(0,a.useState)(e),[b,w]=(0,a.useState)(1),[P,C]=(0,a.useState)(10),[S,k]=(0,a.useState)("asc"),z=t=>{let s=t.target.value?.toLowerCase();console.log(s),""===s?r(e):r(e.filter(e=>e.name.toLowerCase().includes(s)||e.login.toLowerCase().includes(s)))},D=e=>{w(e)},T=Math.max(1,Math.ceil((t?t.length:1)/P));return a.useEffect(()=>{fetch("https://api.euphoria-messenger.uz/users/all",{credentials:"include"}).then(e=>e.json()).then(e=>{r(e.data)})},[]),(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Z,{className:"SearchAndFilters-tabletUp",sx:{borderRadius:"sm",py:2,display:{xs:"none",sm:"flex"},flexWrap:"wrap",gap:1.5,"& > *":{minWidth:{xs:"120px",md:"160px"}}},children:s.jsx(i.Z,{sx:{flex:1},size:"sm",children:s.jsx(o.ZP,{size:"sm",placeholder:"Поиск пользователей",startDecorator:s.jsx(h.Z,{}),onInput:e=>z(e)})})}),s.jsx(c.Z,{className:"OrderTableContainer",variant:"outlined",sx:{display:{xs:"none",sm:"initial"},width:"100%",borderRadius:"sm",flexShrink:1,overflow:"auto",minHeight:0},children:(0,s.jsxs)(d.Z,{"aria-labelledby":"tableTitle",stickyHeader:!0,stickyFooter:!0,hoverRow:!0,sx:{"--TableCell-headBackground":"var(--joy-palette-background-level1)","--Table-headerUnderlineThickness":"1px","--TableRow-hoverBackground":"var(--joy-palette-background-level1)","--TableCell-paddingY":"8px","--TableCell-paddingX":"8px"},children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{style:{width:"6%",textAlign:"center",padding:"12px 6px"},children:s.jsx(g.Z,{})}),s.jsx("th",{style:{width:200,padding:"16px 6px"},children:s.jsx(p.ZP,{children:"Имя"})}),s.jsx("th",{style:{width:200,padding:"16px 6px"},children:"Логин"}),s.jsx("th",{style:{width:200,padding:"16px 6px"},children:"Телефон"}),s.jsx("th",{style:{width:200,padding:"16px 6px"},children:s.jsx(p.ZP,{children:"Роль"})}),s.jsx("th",{style:{width:"15%",padding:"16px 6px"},children:"Дата создания"}),s.jsx("th",{style:{width:"6%",padding:"10px 6px",textAlign:"center"},children:s.jsx(j.Z,{})})]})}),s.jsx("tbody",{children:e&&t.map((e,t)=>(0,s.jsxs)("tr",{children:[s.jsx("td",{style:{textAlign:"center",width:120},children:t+1}),s.jsx("td",{children:(0,s.jsxs)(n.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:[s.jsx(Z.Z,{size:"sm",fullname:e.name[0]}),s.jsx(p.ZP,{level:"body-xs",children:e.name})]})}),s.jsx("td",{children:s.jsx(n.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingRight:"24px"},children:s.jsx(p.ZP,{level:"body-xs",children:e.login})})}),s.jsx("td",{children:s.jsx(p.ZP,{level:"body-xs",children:e.phoneNumber})}),s.jsx("td",{children:s.jsx(p.ZP,{level:"body-xs",children:e.role})}),s.jsx("td",{children:s.jsx(p.ZP,{level:"body-xs",children:e.created_at.slice(0,10)})}),s.jsx("td",{style:{textAlign:"center"},children:s.jsx(N,{id:e.id,name:e.name,login:e.login,role:e.role})})]},t))})]})}),(0,s.jsxs)(n.Z,{className:"Pagination",sx:{pt:2,gap:1,display:{xs:"none",md:"flex"},justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,borderTop:"1px solid #ccc",p:2},children:[(0,s.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(p.ZP,{children:"Показать:"}),s.jsx(v.Z,{size:"sm",value:P,defaultValue:25,onChange:(e,t)=>{C(parseInt(String(t),10)),w(1)},indicator:s.jsx(y.Z,{}),sx:{ml:2,minWidth:80},children:[5,10,25,50].map(e=>s.jsx(f.Z,{value:e,children:e},e))})]}),(0,s.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(l.Z,{size:"sm",variant:"outlined",color:"neutral",startDecorator:s.jsx(m.Z,{}),onClick:()=>D(b-1),disabled:1===b,children:"До"}),s.jsx(n.Z,{sx:{mx:2,display:"flex",alignItems:"center",gap:1},children:Array.from({length:T},(e,t)=>t+1).slice(0,10).map(e=>s.jsx(u.ZP,{size:"sm",variant:e===b?"solid":"outlined",color:"neutral",onClick:()=>D(e),children:e},e))}),s.jsx(l.Z,{size:"sm",variant:"outlined",color:"neutral",endDecorator:s.jsx(x.Z,{}),onClick:()=>D(b+1),disabled:b===T,children:"После"})]})]})]})}},73207:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r(97247),a=r(28964),n=r.n(a),l=r(92810),i=r(76262),o=r(44974);let d=n().forwardRef(function(e,t){let{onChange:r,...a}=e;return s.jsx(l.oc,{...a,mask:"+998 (##) ###-##-##",definitions:{"#":/[0-9]/},onAccept:t=>r({target:{name:e.name,value:t}}),overwrite:!0})});function c(e){return s.jsx(i.ZP,{sx:{my:2},placeholder:"Номер телефона",value:e.phone,onChange:t=>e.setPhone(t.target.value),slotProps:{input:{component:d}},endDecorator:s.jsx(o.Z,{})})}},79505:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(72051),a=r(45347);let n=(0,a.createProxy)(String.raw`C:\Users\akbar\Desktop\messenger\Euphoria-messenger.uz\frontend\src\components\admin\users\UsersTables.tsx#default`);(0,a.createProxy)(String.raw`C:\Users\akbar\Desktop\messenger\Euphoria-messenger.uz\frontend\src\components\admin\users\AddUser.tsx#fetchRoles`);let l=(0,a.createProxy)(String.raw`C:\Users\akbar\Desktop\messenger\Euphoria-messenger.uz\frontend\src\components\admin\users\AddUser.tsx#default`);var i=r(67229),o=r(52845);async function d(e){return await fetch("https://api.euphoria-messenger.uz/users/all",{method:"GET",headers:{"Content-Type":"application/json",Cookie:"token="+e},credentials:"include",cache:"no-cache"}).then(e=>e.json())}async function c(){let e=(0,o.cookies)(),t=e.get("token")?.value;if(!t)throw Error("Token not found in cookies");let r=await d(t);return(0,s.jsxs)(i.Box,{component:"main",className:"MainContent",sx:{px:{xs:2,md:6},pt:{xs:"calc(12px + var(--Header-height))",sm:"calc(12px + var(--Header-height))",md:3},pb:{xs:2,sm:2,md:3},flex:1,display:"flex",flexDirection:"column",minWidth:0,height:"100dvh",gap:1},children:[(0,s.jsxs)(i.Box,{sx:{display:"flex",mb:1,gap:1,flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"start",sm:"center"},flexWrap:"wrap",justifyContent:"space-between"},children:[s.jsx(i.Typography,{level:"h2",component:"h1",children:"Все пользователи"}),s.jsx(l,{})]}),s.jsx(n,{users:r.data})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[379,226,173,550,695,242,562],()=>r(86498));module.exports=s})();