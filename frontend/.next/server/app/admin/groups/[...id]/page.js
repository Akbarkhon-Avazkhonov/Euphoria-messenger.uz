(()=>{var e={};e.id=677,e.ids=[677],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},60938:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(10810),r(94564),r(95537),r(90996);var t=r(30170),n=r(45002),i=r(83876),a=r.n(i),l=r(66299),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(s,o);let d=["",{children:["admin",{children:["groups",{children:["[...id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,10810)),"C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\admin\\groups\\[...id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94564)),"C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,95537)),"C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\admin\\groups\\[...id]\\page.tsx"],x="/admin/groups/[...id]/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/groups/[...id]/page",pathname:"/admin/groups/[...id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4901:(e,s,r)=>{Promise.resolve().then(r.bind(r,9662)),Promise.resolve().then(r.bind(r,97624)),Promise.resolve().then(r.bind(r,36774))},60787:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});var t=r(70531),n=r(97247);let i=(0,t.Z)((0,n.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V8c0-.55-.45-1-1-1s-1 .45-1 1v2H2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1zm9 4c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4"}),"PersonAddRounded")},97624:(e,s,r)=>{"use strict";r.d(s,{default:()=>g});var t=r(97247),n=r(28964),i=r(32088),a=r(38833),l=r(55116),o=r(26339),d=r(86961),c=r(33453),x=r(61441),p=r(97242),h=r(60787);async function u(){return await fetch("https://api.euphoria-messenger.uz/admin/getAllUsers",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",cache:"no-cache"}).then(e=>e.json())}async function m(e,s){return await fetch(`https://api.euphoria-messenger.uz/groups/addUser/${e}/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then(e=>e.json())}function g(e){let[s,r]=n.useState(!1),[g,j]=n.useState(!1),[f,y]=n.useState(""),[Z,v]=n.useState(""),[b,w]=n.useState(!0),[k,C]=n.useState([]),[P,z]=n.useState(!1);return n.useEffect(()=>{(async()=>{try{let e=await u();C(e),w(!1)}catch(e){console.error("Failed to fetch roles:",e),w(!1)}})()},[]),n.useEffect(()=>{P&&(r(!1),v(""),z(!1),y(""),window.location.reload())},[P]),(0,t.jsxs)(t.Fragment,{children:[t.jsx(a.Z,{startDecorator:t.jsx(h.Z,{}),onClick:()=>r(!0),size:"sm",children:"Добавить"}),t.jsx(i.ZP,{open:s,onClose:()=>r(!1),children:(0,t.jsxs)(l.Z,{sx:{maxWidth:{xs:"94%",sm:"400px"},width:"100%",overflowY:"auto"},children:[(0,t.jsxs)(o.Z,{color:"primary",level:"h4",children:["Добавить пользователя в группу",t.jsx(h.Z,{sx:{fontSize:24},color:"primary"})]}),(0,t.jsxs)(d.Z,{spacing:2,children:[t.jsx(c.Z,{required:!0,children:"Выберите оператора"}),t.jsx(x.Z,{name:"operator",required:!0,sx:{minWidth:200},value:f,onChange:(e,s)=>y(s),disabled:b,children:b?t.jsx(p.Z,{value:"",disabled:!0,children:"Загрузка..."}):k&&k.map(e=>t.jsx(p.Z,{value:e.id,children:e.name},e.id))}),t.jsx(a.Z,{type:"submit",size:"sm",onClick:s=>{s.preventDefault(),m(e.id,f).then(()=>{r(!1)}),window.location.reload()},children:"Добавить"})]})]})})]})}},36774:(e,s,r)=>{"use strict";r.d(s,{default:()=>w});var t=r(97247),n=r(28964),i=r(71009),a=r(38833),l=r(93665),o=r(76262),d=r(9290),c=r(22690),x=r(7413),p=r(76617),h=r(61272),u=r(86606),m=r(51e3),g=r(8971),j=r(65646),f=r(97242),y=r(76157),Z=r(92946),v=r(61441),b=r(78757);function w({group_id:e,users:s}){let[r,w]=(0,n.useState)(""),[k,C]=(0,n.useState)(s),[P,z]=(0,n.useState)(1),[T,S]=(0,n.useState)(10),[D,E]=(0,n.useState)("asc"),U=e=>{z(e)},_=Math.max(1,Math.ceil((k?k.length:1)/T));return(0,t.jsxs)(t.Fragment,{children:[t.jsx(i.Z,{className:"SearchAndFilters-tabletUp",sx:{borderRadius:"sm",py:2,display:{xs:"none",sm:"flex"},flexWrap:"wrap",gap:1.5,"& > *":{minWidth:{xs:"120px",md:"160px"}}},children:t.jsx(l.Z,{sx:{flex:1},size:"sm",children:t.jsx(o.ZP,{size:"sm",placeholder:"Поиск пользователей",startDecorator:t.jsx(h.Z,{}),value:r,onChange:e=>{let s=e.target.value.toLowerCase();w(s),C(k.filter(e=>e.name.toLowerCase().includes(s)||e.login.toLowerCase().includes(s)||e.phoneNumber.toLowerCase().includes(s))),z(1)}})})}),t.jsx(c.Z,{className:"OrderTableContainer",variant:"outlined",sx:{display:{xs:"none",sm:"initial"},width:"100%",borderRadius:"sm",flexShrink:1,overflow:"auto",minHeight:0},children:(0,t.jsxs)(d.Z,{"aria-labelledby":"tableTitle",stickyHeader:!0,stickyFooter:!0,hoverRow:!0,sx:{"--TableCell-headBackground":"var(--joy-palette-background-level1)","--Table-headerUnderlineThickness":"1px","--TableRow-hoverBackground":"var(--joy-palette-background-level1)","--TableCell-paddingY":"8px","--TableCell-paddingX":"8px"},children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{style:{width:"6%",textAlign:"center",padding:"12px 6px"},children:t.jsx(j.Z,{})}),t.jsx("th",{style:{width:200,padding:"16px 6px"},children:t.jsx(p.ZP,{children:"Имя"})}),t.jsx("th",{style:{width:200,padding:"16px 6px"},children:"Логин"}),t.jsx("th",{style:{width:200,padding:"16px 6px"},children:"Телефон"}),t.jsx("th",{style:{width:200,padding:"16px 6px"},children:t.jsx(p.ZP,{children:"Роль"})}),t.jsx("th",{style:{width:"15%",padding:"16px 6px"},children:"Дата создания"}),t.jsx("th",{style:{width:"6%",padding:"10px 6px",textAlign:"center"},children:t.jsx(u.Z,{})})]})}),t.jsx("tbody",{children:s&&s.map((s,r)=>(0,t.jsxs)("tr",{children:[t.jsx("td",{style:{textAlign:"center",width:120},children:r+1}),t.jsx("td",{children:(0,t.jsxs)(i.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:[t.jsx(y.Z,{size:"sm",fullname:s.name[0]}),t.jsx(p.ZP,{level:"body-xs",children:s.name})]})}),t.jsx("td",{children:t.jsx(i.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingRight:"24px"},children:t.jsx(p.ZP,{level:"body-xs",children:s.login})})}),t.jsx("td",{children:t.jsx(p.ZP,{level:"body-xs",children:s.phoneNumber})}),t.jsx("td",{children:t.jsx(p.ZP,{level:"body-xs",children:s.role})}),t.jsx("td",{children:t.jsx(p.ZP,{level:"body-xs",children:s.created_at.slice(0,10)})}),t.jsx("td",{style:{textAlign:"center"},children:t.jsx(b.Z,{id:`${e}/${s.id}`,url:"groups/removeGroupUser",canDelete:!0})})]},r))})]})}),(0,t.jsxs)(i.Z,{className:"Pagination",sx:{pt:2,gap:1,display:{xs:"none",md:"flex"},justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,borderTop:"1px solid #ccc",p:2},children:[(0,t.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(p.ZP,{children:"Показать:"}),t.jsx(v.Z,{size:"sm",value:T,defaultValue:25,onChange:(e,s)=>{S(parseInt(String(s),10)),z(1)},indicator:t.jsx(Z.Z,{}),sx:{ml:2,minWidth:80},children:[5,10,25,50].map(e=>t.jsx(f.Z,{value:e,children:e},e))})]}),(0,t.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(a.Z,{size:"sm",variant:"outlined",color:"neutral",startDecorator:t.jsx(g.Z,{}),onClick:()=>U(P-1),disabled:1===P,children:"До"}),t.jsx(i.Z,{sx:{mx:2,display:"flex",alignItems:"center",gap:1},children:Array.from({length:_},(e,s)=>s+1).slice(0,10).map(e=>t.jsx(x.ZP,{size:"sm",variant:e===P?"solid":"outlined",color:"neutral",onClick:()=>U(e),children:e},e))}),t.jsx(a.Z,{size:"sm",variant:"outlined",color:"neutral",endDecorator:t.jsx(m.Z,{}),onClick:()=>U(P+1),disabled:P===_,children:"После"})]})]})]})}},78757:(e,s,r)=>{"use strict";r.d(s,{Z:()=>Z});var t=r(97247),n=r(28964),i=r(38833),a=r(32088),l=r(7413),o=r(55116),d=r(26339),c=r(90693),x=r(94504),p=r(65441),h=r(95498),u=r(8882),m=r(34113),g=r(47058),j=r(72411),f=r(82076),y=r(6055);function Z(e){let[s,r]=n.useState(!1),[Z,v]=n.useState(!1),b=()=>{if(!e.canDelete){j.ZP.error("Нельзя удалить этот элемент");return}r(!0)},w=()=>{fetch(`https://api.euphoria-messenger.uz/${e.url}/${e.id}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(s=>{if(s.ok)return e.deleteCallback?(e.deleteCallback(e.id),j.ZP.success("Успешно удалено"),r(!1)):(j.ZP.success("Успешно удалено"),window.location.reload()),s.json();j.ZP.error("Ошибка при удалении"),window.location.reload()})};return(0,t.jsxs)(t.Fragment,{children:[e.isMaterial?t.jsx(f.Z,{size:"small",onClick:()=>b(),children:e.canDelete?t.jsx(y.Z,{}):t.jsx(g.Z,{})}):t.jsx(l.ZP,{size:"sm",color:"danger",onClick:()=>b(),children:e.canDelete?t.jsx(m.Z,{}):t.jsx(g.Z,{})}),t.jsx(a.ZP,{"aria-labelledby":"modal-title","aria-describedby":"modal-desc",open:s,onClose:()=>r(!1),sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:Z?t.jsx(o.Z,{variant:"outlined",role:"alertdialog",children:t.jsx(h.Z,{color:"danger",variant:"soft"})}):(0,t.jsxs)(o.Z,{variant:"outlined",role:"alertdialog",color:"danger",children:[(0,t.jsxs)(d.Z,{children:[t.jsx(u.Z,{}),"Вы уверены, что хотите удалить?"]}),t.jsx(c.Z,{}),e.dangerText&&t.jsx(x.Z,{children:e.dangerText}),(0,t.jsxs)(p.Z,{buttonFlex:2,children:[t.jsx(i.Z,{variant:"solid",color:"danger",onClick:()=>{v(!0),w()},children:"Да"}),t.jsx(i.Z,{variant:"solid",color:"primary",onClick:()=>r(!1),children:"Нет"})]})]})})]})}},10810:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c});var t=r(72051),n=r(67229),i=r(52845),a=r(45347);(0,a.createProxy)(String.raw`C:\Users\akbar\Desktop\messenger\Euphoria-messenger.uz\frontend\src\components\admin\groups\AddUserGroup.tsx#fetchUsers`);let l=(0,a.createProxy)(String.raw`C:\Users\akbar\Desktop\messenger\Euphoria-messenger.uz\frontend\src\components\admin\groups\AddUserGroup.tsx#default`),o=(0,a.createProxy)(String.raw`C:\Users\akbar\Desktop\messenger\Euphoria-messenger.uz\frontend\src\components\admin\groups\GroupUsersTable.tsx#default`);async function d(e,s){return await fetch(`https://api.euphoria-messenger.uz/groups/getGroupUsers/${s}`,{method:"GET",headers:{"Content-Type":"application/json",Cookie:"token="+e},credentials:"include",cache:"no-cache"}).then(e=>e.json())}async function c({params:e}){let s=(0,i.cookies)(),r=s.get("token")?.value;if(!r)throw Error("Token not found in cookies");let a=await d(r,e.id[0]);return(0,t.jsxs)(n.Box,{component:"main",className:"MainContent",sx:{px:{xs:2,md:6},pt:{xs:"calc(12px + var(--Header-height))",sm:"calc(12px + var(--Header-height))",md:3},pb:{xs:2,sm:2,md:3},flex:1,display:"flex",flexDirection:"column",minWidth:0,height:"100dvh",gap:1},children:[(0,t.jsxs)(n.Box,{sx:{display:"flex",mb:1,gap:1,flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"start",sm:"center"},flexWrap:"wrap",justifyContent:"space-between"},children:[t.jsx(n.Typography,{level:"h2",component:"h1",children:decodeURIComponent(e.id[1])}),t.jsx(l,{id:e.id[0]})]}),t.jsx(o,{group_id:e.id[0],users:a.data})]})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[379,226,173,550,695,203,562],()=>r(60938));module.exports=t})();