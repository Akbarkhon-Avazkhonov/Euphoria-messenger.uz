(()=>{var e={};e.id=717,e.ids=[717],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},66895:(e,s,n)=>{"use strict";n.r(s),n.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o}),n(67198),n(94564),n(95537),n(90996);var t=n(30170),r=n(45002),a=n(83876),i=n.n(a),l=n(66299),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);n.d(s,d);let o=["",{children:["admin",{children:["roles",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,67198)),"C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\admin\\roles\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,94564)),"C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(n.bind(n,95537)),"C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\akbar\\Desktop\\messenger\\Euphoria-messenger.uz\\frontend\\src\\app\\admin\\roles\\page.tsx"],x="/admin/roles/page",h={require:n,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/roles/page",pathname:"/admin/roles",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},78531:(e,s,n)=>{Promise.resolve().then(n.bind(n,9662)),Promise.resolve().then(n.bind(n,38560)),Promise.resolve().then(n.bind(n,64807))},36988:(e,s,n)=>{"use strict";n.d(s,{Z:()=>a});var t=n(70531),r=n(97247);let a=(0,t.Z)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},50313:(e,s,n)=>{"use strict";n.d(s,{Z:()=>a});var t=n(70531),r=n(97247);let a=(0,t.Z)((0,r.jsx)("path",{d:"M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1q-.15.15-.15.36M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"EditRounded")},72442:(e,s,n)=>{"use strict";n.d(s,{Z:()=>a});var t=n(70531),r=n(97247);let a=(0,t.Z)((0,r.jsx)("path",{d:"M22 9V8c0-.55-.45-1-1-1s-1 .45-1 1v1h-1c-.55 0-1 .45-1 1s.45 1 1 1h1v1c0 .55.45 1 1 1s1-.45 1-1v-1h1c.55 0 1-.45 1-1s-.45-1-1-1zM8 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m4.51-8.95C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95m4.02 9.78C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17"}),"GroupAddRounded")},35680:(e,s,n)=>{"use strict";n.d(s,{Z:()=>a});var t=n(70531),r=n(97247);let a=(0,t.Z)((0,r.jsx)("path",{d:"M19.5 12c0-.23-.01-.45-.03-.68l1.86-1.41c.4-.3.51-.86.26-1.3l-1.87-3.23c-.25-.44-.79-.62-1.25-.42l-2.15.91c-.37-.26-.76-.49-1.17-.68l-.29-2.31c-.06-.5-.49-.88-.99-.88h-3.73c-.51 0-.94.38-1 .88l-.29 2.31c-.41.19-.8.42-1.17.68l-2.15-.91c-.46-.2-1-.02-1.25.42L2.41 8.62c-.25.44-.14.99.26 1.3l1.86 1.41c-.02.22-.03.44-.03.67s.01.45.03.68l-1.86 1.41c-.4.3-.51.86-.26 1.3l1.87 3.23c.25.44.79.62 1.25.42l2.15-.91c.37.26.76.49 1.17.68l.29 2.31c.06.5.49.88.99.88h3.73c.5 0 .93-.38.99-.88l.29-2.31c.41-.19.8-.42 1.17-.68l2.15.91c.46.2 1 .02 1.25-.42l1.87-3.23c.25-.44.14-.99-.26-1.3l-1.86-1.41c.03-.23.04-.45.04-.68m-7.46 3.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5"}),"SettingsRounded")},38560:(e,s,n)=>{"use strict";n.d(s,{default:()=>Z});var t=n(97247),r=n(28964),a=n(38833),i=n(33453),l=n(32088),d=n(55116),o=n(26339),c=n(86961),x=n(36988),h=n(72442),p=n(8133),u=n(75450);let m={can_manage_users:!1,can_write:!0,can_read:!0,can_delete:!1,can_send_audio:!1,can_read_audio:!1,can_send_video:!1,can_read_video:!1,can_send_photo:!1,can_read_photo:!1,can_send_file:!1,can_read_file:!1},j={can_manage_users:"Управление пользователями",can_write:"Запись",can_read:"Чтение",can_delete:"Удаление",can_send_audio:"Отправка аудио",can_read_audio:"Чтение аудио",can_send_video:"Отправка видео",can_read_video:"Чтение видео",can_send_photo:"Отправка фото",can_read_photo:"Чтение фото",can_send_file:"Отправка файла",can_read_file:"Чтение файла"};async function g(e,s,n){return encodeURIComponent(window.document.cookie),await fetch("https://euphoria-messenger.uz:4000/roles/create",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e,description:s,access:n})})}function Z(){let[e,s]=r.useState(!1),[n,Z]=r.useState(""),[v,f]=r.useState(""),[_,y]=r.useState(m);return(0,t.jsxs)(t.Fragment,{children:[t.jsx(a.Z,{startDecorator:t.jsx(x.Z,{}),onClick:()=>s(!0),size:"sm",children:"Добавить"}),t.jsx(l.ZP,{open:e,onClose:()=>s(!1),children:(0,t.jsxs)(d.Z,{sx:{maxWidth:{xs:"94%",sm:"400px"},width:"100%",overflowY:"auto"},children:[(0,t.jsxs)(o.Z,{children:["Новый Роль",t.jsx(h.Z,{sx:{fontSize:24},color:"primary"})]}),(0,t.jsxs)(c.Z,{spacing:2,children:[t.jsx(i.Z,{required:!0,children:"Имя роля"}),t.jsx(p.Z,{autoFocus:!0,required:!0,onChange:e=>Z(e.target.value)}),t.jsx(i.Z,{required:!0,children:"Описание"}),t.jsx(p.Z,{required:!0,onChange:e=>f(e.target.value)}),Object.keys(_).map(e=>t.jsx(u.Z,{label:j[e],checked:_[e],setChecked:s=>{y(n=>({...n,[e]:s}))}},e)),t.jsx(a.Z,{type:"submit",size:"sm",onClick:e=>{e.preventDefault(),g(n,v,_).then(()=>{s(!1)}),window.location.reload()},children:"Добавить"})]})]})})]})}},64807:(e,s,n)=>{"use strict";n.d(s,{default:()=>R});var t=n(97247),r=n(28964),a=n(71009),i=n(38833),l=n(93665),d=n(76262),o=n(9290),c=n(22690),x=n(7413),h=n(76617),p=n(61272),u=n(86606),m=n(51e3),j=n(8971),g=n(35680),Z=n(65646),v=n(97242),f=n(76157),_=n(92946),y=n(61441),b=n(33453),w=n(32088),k=n(55116),C=n(26339),P=n(86961),z=n(72442),S=n(8133),T=n(75450),D=n(50313);let q={can_manage_users:"Управление пользователями",can_write:"Запись",can_read:"Чтение",can_delete:"Удаление",can_send_audio:"Отправка аудио",can_read_audio:"Чтение аудио",can_send_video:"Отправка видео",can_read_video:"Чтение видео",can_send_photo:"Отправка фото",can_read_photo:"Чтение фото",can_send_file:"Отправка файла",can_read_file:"Чтение файла"};async function A(e,s,n,t){return encodeURIComponent(window.document.cookie),await fetch(`https://euphoria-messenger.uz:4000/roles/one/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:s,description:n,access:t})})}function E(e){let[s,n]=r.useState(!1),[a,l]=r.useState(e.name),[d,o]=r.useState(e.description),[c,h]=r.useState(e.access);return(0,t.jsxs)(r.Fragment,{children:[e.disabled?t.jsx(x.ZP,{size:"sm",color:"danger",disabled:!0,children:t.jsx(D.Z,{})}):t.jsx(x.ZP,{size:"sm",color:"primary",onClick:()=>n(!0),children:t.jsx(D.Z,{})}),t.jsx(w.ZP,{open:s,onClose:()=>n(!1),children:(0,t.jsxs)(k.Z,{sx:{maxWidth:{xs:"94%",sm:"400px"},width:"100%",overflowY:"auto"},children:[(0,t.jsxs)(C.Z,{children:["Новый Роль",t.jsx(z.Z,{sx:{fontSize:24},color:"primary"})]}),t.jsx("form",{onSubmit:s=>{s.preventDefault(),A(e.id,a,d,c).then(()=>{n(!1)}),window.location.reload()},children:(0,t.jsxs)(P.Z,{spacing:2,children:[t.jsx(b.Z,{required:!0,children:"Имя роля"}),t.jsx(S.Z,{value:a,autoFocus:!0,required:!0,onChange:e=>l(e.target.value)}),t.jsx(b.Z,{required:!0,children:"Описание"}),t.jsx(S.Z,{value:d,required:!0,onChange:e=>o(e.target.value)}),Object.keys(c).map(e=>t.jsx(T.Z,{label:q[e],checked:c[e],setChecked:s=>{h(n=>({...n,[e]:s}))}},e)),t.jsx(i.Z,{type:"submit",size:"sm",children:"Добавить"})]})})]})})]})}var M=n(78757);function R({roles:e}){let[s,n]=(0,r.useState)(""),[b,w]=(0,r.useState)(e),[k,C]=(0,r.useState)(1),[P,z]=(0,r.useState)(10),[S,T]=(0,r.useState)("asc"),D=e=>{C(e)},q=Math.max(1,Math.ceil(b.length/P)),A=(k-1)*P;return b.slice(A,A+P),(0,t.jsxs)(t.Fragment,{children:[t.jsx(a.Z,{className:"SearchAndFilters-tabletUp",sx:{borderRadius:"sm",py:2,display:{xs:"none",sm:"flex"},flexWrap:"wrap",gap:1.5,"& > *":{minWidth:{xs:"120px",md:"160px"}}},children:t.jsx(l.Z,{sx:{flex:1},size:"sm",children:t.jsx(d.ZP,{size:"sm",placeholder:"Поиск пользователей",startDecorator:t.jsx(p.Z,{}),value:s,onChange:s=>{let t=s.target.value.toLowerCase();n(t),w(e.filter(e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t))),C(1)}})})}),t.jsx(c.Z,{className:"OrderTableContainer",variant:"outlined",sx:{display:{xs:"none",sm:"initial"},width:"100%",borderRadius:"sm",flexShrink:1,overflow:"auto",minHeight:0},children:(0,t.jsxs)(o.Z,{"aria-labelledby":"tableTitle",stickyHeader:!0,stickyFooter:!0,hoverRow:!0,sx:{"--TableCell-headBackground":"var(--joy-palette-background-level1)","--Table-headerUnderlineThickness":"1px","--TableRow-hoverBackground":"var(--joy-palette-background-level1)","--TableCell-paddingY":"8px","--TableCell-paddingX":"8px"},children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{style:{width:"6%",textAlign:"center",padding:"12px 6px"},children:t.jsx(Z.Z,{})}),t.jsx("th",{style:{width:200,padding:"16px 6px"},children:t.jsx(h.ZP,{children:"Имя"})}),t.jsx("th",{style:{width:200,padding:"16px 6px"},children:"Описание"}),t.jsx("th",{style:{width:200,padding:"16px 6px"},children:"Управление"}),t.jsx("th",{style:{width:200,padding:"16px 6px"},children:"Количество пользователей"}),t.jsx("th",{style:{width:"15%",padding:"16px 6px"},children:"Дата создания"}),t.jsx("th",{style:{width:"4%",padding:"10px 6px",textAlign:"center"},children:t.jsx(g.Z,{})}),t.jsx("th",{style:{width:"6%",padding:"10px 6px",textAlign:"center"},children:t.jsx(u.Z,{})})]})}),t.jsx("tbody",{children:e&&e.map((e,s)=>(0,t.jsxs)("tr",{children:[t.jsx("td",{style:{textAlign:"center",width:120},children:s+1}),t.jsx("td",{children:(0,t.jsxs)(a.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:[t.jsx(f.Z,{size:"sm",fullname:e.name[0]}),t.jsx(h.ZP,{level:"body-xs",children:e.name})]})}),t.jsx("td",{children:t.jsx(a.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingRight:"24px"},children:t.jsx(h.ZP,{level:"body-xs",children:e.description})})}),t.jsx("td",{children:t.jsx(h.ZP,{level:"body-xs",children:e.access.can_manage_users?"Да":"Нет "})}),t.jsx("td",{children:t.jsx(h.ZP,{level:"body-xs",children:e.users_count})}),t.jsx("td",{children:t.jsx(h.ZP,{level:"body-xs",children:e.created_at.slice(0,10)})}),t.jsx("td",{style:{textAlign:"center"},children:"Админ"!==e.name?t.jsx(E,{id:e.id,name:e.name,description:e.description,access:e.access}):t.jsx(E,{id:e.id,name:e.name,description:e.description,access:e.access,disabled:!0})}),t.jsx("td",{style:{textAlign:"center"},children:"Админ"!==e.name?t.jsx(M.Z,{id:e.id,canDelete:!0,url:"roles/one"}):t.jsx(M.Z,{id:e.id,canDelete:!1,url:"roles/one"})})]},e.id))})]})}),(0,t.jsxs)(a.Z,{className:"Pagination",sx:{pt:2,gap:1,display:{xs:"none",md:"flex"},justifyContent:"space-between",alignItems:"center",position:"sticky",bottom:0,borderTop:"1px solid #ccc",p:2},children:[(0,t.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(h.ZP,{children:"Показать:"}),t.jsx(y.Z,{size:"sm",value:P,defaultValue:25,onChange:(e,s)=>{z(parseInt(String(s),10)),C(1)},indicator:t.jsx(_.Z,{}),sx:{ml:2,minWidth:80},children:[5,10,25,50].map(e=>t.jsx(v.Z,{value:e,children:e},e))})]}),(0,t.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(i.Z,{size:"sm",variant:"outlined",color:"neutral",startDecorator:t.jsx(j.Z,{}),onClick:()=>D(k-1),disabled:1===k,children:"До"}),t.jsx(a.Z,{sx:{mx:2,display:"flex",alignItems:"center",gap:1},children:Array.from({length:q},(e,s)=>s+1).slice(0,10).map(e=>t.jsx(x.ZP,{size:"sm",variant:e===k?"solid":"outlined",color:"neutral",onClick:()=>D(e),children:e},e))}),t.jsx(i.Z,{size:"sm",variant:"outlined",color:"neutral",endDecorator:t.jsx(m.Z,{}),onClick:()=>D(k+1),disabled:k===q,children:"После"})]})]})]})}},78757:(e,s,n)=>{"use strict";n.d(s,{Z:()=>f});var t=n(97247),r=n(28964),a=n(38833),i=n(32088),l=n(7413),d=n(55116),o=n(26339),c=n(90693),x=n(94504),h=n(65441),p=n(95498),u=n(8882),m=n(34113),j=n(47058),g=n(72411),Z=n(82076),v=n(6055);function f(e){let[s,n]=r.useState(!1),[f,_]=r.useState(!1),y=()=>{if(!e.canDelete){g.ZP.error("Нельзя удалить этот элемент");return}n(!0)},b=()=>{fetch(`https://euphoria-messenger.uz:4000/${e.url}/${e.id}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(s=>{if(s.ok)return e.deleteCallback?(e.deleteCallback(e.id),g.ZP.success("Успешно удалено"),n(!1)):(g.ZP.success("Успешно удалено"),window.location.reload()),s.json();g.ZP.error("Ошибка при удалении"),window.location.reload()})};return(0,t.jsxs)(t.Fragment,{children:[e.isMaterial?t.jsx(Z.Z,{size:"small",onClick:()=>y(),children:e.canDelete?t.jsx(v.Z,{}):t.jsx(j.Z,{})}):t.jsx(l.ZP,{size:"sm",color:"danger",onClick:()=>y(),children:e.canDelete?t.jsx(m.Z,{}):t.jsx(j.Z,{})}),t.jsx(i.ZP,{"aria-labelledby":"modal-title","aria-describedby":"modal-desc",open:s,onClose:()=>n(!1),sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:f?t.jsx(d.Z,{variant:"outlined",role:"alertdialog",children:t.jsx(p.Z,{color:"danger",variant:"soft"})}):(0,t.jsxs)(d.Z,{variant:"outlined",role:"alertdialog",color:"danger",children:[(0,t.jsxs)(o.Z,{children:[t.jsx(u.Z,{}),"Вы уверены, что хотите удалить?"]}),t.jsx(c.Z,{}),e.dangerText&&t.jsx(x.Z,{children:e.dangerText}),(0,t.jsxs)(h.Z,{buttonFlex:2,children:[t.jsx(a.Z,{variant:"solid",color:"danger",onClick:()=>{_(!0),b()},children:"Да"}),t.jsx(a.Z,{variant:"solid",color:"primary",onClick:()=>n(!1),children:"Нет"})]})]})})]})}},75450:(e,s,n)=>{"use strict";n.d(s,{Z:()=>l});var t=n(97247),r=n(93665),a=n(33453),i=n(13779);function l(e){return(0,t.jsxs)(r.Z,{orientation:"horizontal",sx:{maxWidth:{xs:"94%",sm:"600px"},width:"100%",overflowY:"auto",justifyContent:"space-between"},children:[t.jsx(a.Z,{color:e.checked?"primary":"text.primary",children:e.label}),t.jsx(i.Z,{checked:e.checked,onChange:s=>e.setChecked(s.target.checked),color:"primary",variant:e.checked?"solid":"outlined",slotProps:{endDecorator:{sx:{minWidth:24}}}})]})}n(28964)},67198:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>c});var t=n(72051),r=n(45347);let a=(0,r.createProxy)(String.raw`C:\Users\akbar\Desktop\messenger\Euphoria-messenger.uz\frontend\src\components\admin\roles\AddRole.tsx#default`),i=(0,r.createProxy)(String.raw`C:\Users\akbar\Desktop\messenger\Euphoria-messenger.uz\frontend\src\components\admin\roles\RolesTables.tsx#default`);var l=n(67229),d=n(52845);async function o(e){return await fetch("https://euphoria-messenger.uz:4000/roles/all",{method:"GET",headers:{"Content-Type":"application/json",Cookie:"token="+e},credentials:"include",cache:"no-cache"}).then(e=>e.json())}async function c(){let e=(0,d.cookies)(),s=e.get("token")?.value;if(!s)throw Error("Token not found in cookies");let n=await o(s);return(0,t.jsxs)(l.Box,{component:"main",className:"MainContent",sx:{px:{xs:2,md:6},pt:{xs:"calc(12px + var(--Header-height))",sm:"calc(12px + var(--Header-height))",md:3},pb:{xs:2,sm:2,md:3},flex:1,display:"flex",flexDirection:"column",minWidth:0,height:"100dvh",gap:1},children:[(0,t.jsxs)(l.Box,{sx:{display:"flex",mb:1,gap:1,flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"start",sm:"center"},flexWrap:"wrap",justifyContent:"space-between"},children:[t.jsx(l.Typography,{level:"h2",component:"h1",children:"Все роли"}),t.jsx(a,{})]}),t.jsx(i,{roles:n.data})]})}}};var s=require("../../../webpack-runtime.js");s.C(e);var n=e=>s(s.s=e),t=s.X(0,[379,226,173,550,695,203,562],()=>n(66895));module.exports=t})();