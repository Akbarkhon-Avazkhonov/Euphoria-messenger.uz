"use strict";exports.id=13,exports.ids=[13],exports.modules={93013:(e,t,r)=>{r.d(t,{default:()=>eg});var s=r(97247),n=r(28964),i=r.n(n),o=r(56464),l=r(71009),a=r(86961),d=r(22690),c=r(9364),u=r(4872),x=r(18481),h=r(76262),g=r(78993);function p(){return s.jsx(l.Z,{sx:{px:2,pb:1.5},children:s.jsx(h.ZP,{size:"sm",startDecorator:s.jsx(g.Z,{}),placeholder:"Поиск...","aria-label":"Search"})})}var m=r(76617),j=r(73650),f=r(43441),y=r(38833),Z=r(32088),v=r(7413),w=r(55116),b=r(26339),I=r(90693),S=r(94504),C=r(65441),k=r(95498),R=r(85595),D=r(8882);function P(){let[e,t]=n.useState(!1),[r,i]=n.useState(!1);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(v.ZP,{variant:"plain","aria-label":"edit",color:"neutral",size:"sm",sx:{display:{xs:"none",sm:"unset"}},onClick:()=>t(!0),children:s.jsx(R.Z,{})}),s.jsx(Z.ZP,{"aria-labelledby":"modal-title","aria-describedby":"modal-desc",open:e,onClose:()=>t(!1),sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:r?s.jsx(w.Z,{variant:"outlined",role:"alertdialog",children:s.jsx(k.Z,{color:"danger",variant:"soft"})}):(0,s.jsxs)(w.Z,{variant:"outlined",role:"alertdialog",color:"danger",children:[(0,s.jsxs)(b.Z,{children:[s.jsx(D.Z,{}),"Вы уверены, что хотите выйти?"]}),s.jsx(I.Z,{}),s.jsx(S.Z,{children:"Все отправленные и полученные сообщения будут сохранены в вашем аккаунте."}),(0,s.jsxs)(C.Z,{children:[s.jsx(y.Z,{variant:"solid",color:"danger",onClick:()=>{window.location.href="/"},children:"Да"}),s.jsx(y.Z,{variant:"plain",color:"neutral",onClick:()=>t(!1),children:"Нет"})]})]})})]})}function z(e){return(0,s.jsxs)(a.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",p:2,pb:1.5,children:[s.jsx(f.Z,{}),s.jsx(m.ZP,{fontSize:{xs:"md",md:"lg"},component:"h1",fontWeight:"lg",sx:{mr:"auto"},endDecorator:e.unreadDialogs&&s.jsx(j.Z,{variant:"soft",color:"primary",size:"md",slotProps:{root:{component:"span"}},children:e.unreadDialogs}),children:"Сообщения"}),s.jsx(P,{})]})}var M=r(49267),T=r(24833),A=r(76157),F=r(64067);function E(e){return"777000"===e.userId?null:(console.log(e.title),console.log(e.userId),(0,s.jsxs)(s.Fragment,{children:[s.jsx(M.Z,{children:(0,s.jsxs)(T.Z,{onClick:()=>{e.setSelectedUserId(e.userId.toString())},selected:e.selected,color:"neutral",sx:{flexDirection:"column",alignItems:"initial",gap:1},children:[(0,s.jsxs)(a.Z,{direction:"row",spacing:1.5,children:[s.jsx(A.Z,{status:e.status,fullname:e.title,online:!0}),(0,s.jsxs)(l.Z,{sx:{flex:1},children:[s.jsx(m.ZP,{level:"title-sm",children:e.title}),s.jsx(m.ZP,{level:"body-sm",children:e.phone})]}),(0,s.jsxs)(l.Z,{sx:{lineHeight:1.5,textAlign:"right"},children:[s.jsx(m.ZP,{level:"body-xs",display:{xs:"none",md:"block"},noWrap:!0,children:function(e){let t=new Date(1e3*e);return new Date().getDate()===t.getDate()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date().getDate()-1===t.getDate()?"Вчера":`${t.toLocaleString("en-GB").slice(0,10)}`}(e.date)}),e.unreadCount?s.jsx(j.Z,{variant:"solid",color:"primary",size:"sm",children:e.unreadCount}):null]})]}),s.jsx(m.ZP,{level:"body-sm",sx:{display:"-webkit-box",WebkitLineClamp:"2",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:e.message})]})}),s.jsx(F.Z,{sx:{margin:0},inset:"gutter"})]}))}var L=r(17914);function $(e){return e.isConnected?s.jsx(L.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:e.isConnected,autoHideDuration:5e3,onClose:()=>e.setIsConnected(!1),variant:"soft",color:"success",children:s.jsx(m.ZP,{level:"body-sm",sx:{color:"text.secondary"},children:"Подключено"})}):null}function W(e){return e.newMessage?s.jsx(L.Z,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.newMessage,autoHideDuration:5e3,onClose:()=>e.setNewMessage(null),variant:"soft",color:"primary",children:s.jsx(m.ZP,{level:"body-sm",sx:{color:"text.secondary"},children:e.newMessage.message})}):null}var N=r(8133),U=r(75741),_=r(322),B=r(73207),J=r(32282);function O(e){let[t,r]=n.useState(!1),[i,o]=n.useState(""),[l,d]=n.useState(""),[c,u]=n.useState(""),[x,g]=n.useState(null),p=async()=>{e.socket.emit("sendFirstMessage",{phone:c,firstName:i,message:l}),e.socket.emit("getDialogs"),d(""),o(""),u(""),r(!1)};return n.useEffect(()=>{(0,J.$J)("can_write",g)},[]),(0,s.jsxs)(s.Fragment,{children:[x?s.jsx(v.ZP,{"aria-label":"add",color:"primary",variant:"solid",size:"md",sx:{position:"fixed",bottom:20,left:345},onClick:()=>r(!0),children:s.jsx(U.Z,{})}):null,s.jsx(Z.ZP,{open:t,onClose:()=>r(!1),children:(0,s.jsxs)(w.Z,{sx:{width:{xs:"90vw",sm:"550px"}},children:[s.jsx(b.Z,{color:"primary",level:"h4",children:"Отправить новое сообщение "}),(0,s.jsxs)(a.Z,{spacing:2,children:[s.jsx(h.ZP,{autoFocus:!0,required:!0,placeholder:"Имя пользователя",onChange:e=>o(e.target.value),value:i,endDecorator:s.jsx(_.Z,{})}),s.jsx(B.Z,{phone:c,setPhone:u}),s.jsx(N.Z,{placeholder:"Сообщение",value:l,onChange:e=>d(e.target.value)}),s.jsx(y.Z,{"aria-label":"send",color:"primary",size:"md",onClick:p,children:"Отправить сообщение"})]})]})})]})}var V=r(93665),H=r(16698),G=r(92990);function K(e){let[t,r]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),l=t=>{let r=new FileReader;r.onload=()=>{u.socket.emit("sendFile",{userId:e.userId,file:t,fileName:t.name,fileType:t.type,fileBuffer:r.result})},r.readAsArrayBuffer(t),window.location.reload()};return s.jsx("div",{children:t&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("input",{type:"file",style:{display:"none"},id:"fileInput",onChange:e=>{let t=e.target.files[0];t&&(o(t),l(t))}}),s.jsx("label",{htmlFor:"fileInput",children:s.jsx(v.ZP,{size:"sm",variant:"plain",color:"neutral",component:"span",children:s.jsx(G.Z,{})})})]})})}var Y=r(77057),Q=r(67548),X=r(54284);let q=e=>{let[t,r]=i().useState(null),[n,o]=i().useState(!1),[l,a]=i().useState(null),[d,c]=i().useState(null),[x,h]=i().useState(null),g=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);a(e),c(t),o(!0)}catch(e){console.log("User didn't allowed us to access the microphone.")}};return i().useEffect(()=>{(0,J.$J)("can_send_audio",r)},[]),i().useEffect(()=>{n&&d&&(d.start(),d.ondataavailable=({data:e})=>h(e))},[n,d]),i().useEffect(()=>{!n&&x&&l&&((0,X.Z)(x).then(t=>{let r={userId:e.userId,blob:x,caption:e.caption,duration:t};u.socket.emit("sendAudio",r),e.setTextAreaValue("")}),a(null),h(null))},[n,x]),t?s.jsx(v.ZP,{onClick:n?()=>{if(n&&l&&d){for(let e of l.getAudioTracks())e.stop();d.stop(),c(null),o(!1)}}:g,children:n?s.jsx(Q.Z,{}):s.jsx(Y.Z,{})}):s.jsx(s.Fragment,{})};var ee=r(15641);function et(e){let[t,r]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),l=t=>{let r=new FileReader;r.onload=()=>{console.log("photo",t),u.socket.emit("sendPhoto",{userId:e.userId,photo:r.result,fileName:t.name,fileType:t.type,fileBuffer:r.result})},r.readAsArrayBuffer(t),window.location.reload()};return s.jsx("div",{children:t&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"photoInput",onChange:e=>{let t=e.target.files?e.target.files[0]:null;t&&(o(t),l(t))}}),s.jsx("label",{htmlFor:"photoInput",children:s.jsx(v.ZP,{size:"sm",variant:"plain",color:"neutral",component:"span",children:s.jsx(ee.Z,{})})})]})})}var er=r(63500);let es=e=>{let[t,r]=(0,n.useState)(null),[i,o]=(0,n.useState)(!1),[l,a]=(0,n.useState)(null),[d,c]=(0,n.useState)(null),[x,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{(0,J.$J)("can_send_video",r)},[]);let g=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),t=new MediaRecorder(e);a(e),c(t),o(!0)}catch(e){console.log("User didn't allow camera or microphone access.")}};return(0,n.useEffect)(()=>{i&&d&&(d.start(),d.ondataavailable=({data:e})=>h(e))},[i,d]),(0,n.useEffect)(()=>{if(i||!x||!l)return;let t=new FileReader;t.onloadend=()=>{let r=t.result,s={userId:e.userId,video:r,fileName:`video_recording_${Date.now()}.mp4`,caption:e.caption||"",duration:x.size,fileBuffer:t.result};u.socket.emit("sendVideo",s),e.setTextAreaValue("")},t.readAsDataURL(x),a(null),h(null)},[i,x]),t?s.jsx(v.ZP,{onClick:i?()=>{i&&l&&d&&(console.log("stop recording"),l.getTracks().forEach(e=>e.stop()),d.stop(),c(null),o(!1))}:g,children:i?s.jsx(Q.Z,{}):s.jsx(er.Z,{})}):null};function en(e){let{textAreaValue:t,setTextAreaValue:r,onSubmit:i,userId:o}=e,d=n.useRef(null),[c,u]=n.useState(null);n.useEffect(()=>{(0,J.$J)("can_write",u)},[]);let x=()=>{""!==t.trim()&&c&&(i(t,o),r(""))};return null===c?s.jsx(s.Fragment,{}):s.jsx(l.Z,{sx:{px:2,pb:2},children:s.jsx(V.Z,{children:s.jsx(N.Z,{placeholder:"Введите сообщение...","aria-label":"Message",ref:d,onChange:e=>r(e.target.value),value:t,maxRows:15,disabled:!c,endDecorator:(0,s.jsxs)(a.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1,sx:{py:1,pr:1,borderTop:"1px solid",borderColor:"divider"},children:[s.jsx(a.Z,{direction:"row",children:+o>1e4&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(q,{userId:o,setTextAreaValue:r}),s.jsx(es,{userId:o,setTextAreaValue:r}),s.jsx(K,{userId:o}),s.jsx(et,{userId:o})]})}),s.jsx(y.Z,{size:"sm",color:"primary",sx:{alignSelf:"center",borderRadius:"sm"},endDecorator:s.jsx(H.Z,{}),onClick:x,disabled:!c,children:"Отправить"})]}),onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&x()},sx:{"& textarea:first-of-type":{minHeight:48}}})})})}var ei=r(32651);function eo(){return(0,s.jsxs)(s.Fragment,{children:[s.jsx(M.Z,{children:(0,s.jsxs)(a.Z,{direction:"row",spacing:1.5,children:[s.jsx(ei.Z,{variant:"circular",width:32,height:32}),(0,s.jsxs)(l.Z,{sx:{flex:1},children:[s.jsx(ei.Z,{variant:"rectangular",width:200,height:"1em",sx:{mb:1}}),s.jsx(ei.Z,{variant:"rectangular",width:140,height:"1em"})]})]})}),s.jsx(F.Z,{sx:{margin:0},inset:"gutter"})]})}var el=r(23787),ea=r(28140),ed=r(99511),ec=r(15680),eu=r(15382);function ex(e){let{message:t,out:r,media:i,date:o,photoUrl:c,canReadPhoto:x,senderName:h,voiceUrl:g}=e,[p,j]=n.useState(!1),[f,y]=n.useState(!1),[Z,v]=n.useState(!1),w="Отправленный файл";if("null"!=i&&i)try{let e=JSON.parse(i).document.attributes;for(let t in e)Object.keys(e[t]).forEach(r=>{"fileName"==r&&(w=e[t][r])})}catch(e){}return c&&!x?s.jsx(d.Z,{variant:"outlined",sx:{px:1.75,py:1.25,borderRadius:"lg",borderTopRightRadius:r?0:"lg",borderTopLeftRadius:r?"lg":0},children:(0,s.jsxs)(a.Z,{direction:"row",spacing:1.5,alignItems:"center",sx:{cursor:"pointer"},children:[s.jsx(el.Z,{color:"primary",size:"lg",children:s.jsx(ea.Z,{})}),s.jsx("div",{children:s.jsx(m.ZP,{fontSize:"sm",children:"Вам не разрешено просматривать фото"})})]})}):g?s.jsx(d.Z,{variant:"outlined",sx:{borderRadius:"lg",borderTopRightRadius:r?0:"lg",borderTopLeftRadius:r?"lg":0,minWidth:"400px"},children:s.jsx(eu.z,{src:`https://euphoria-messenger.uz:4000/${g}`,style:{width:"100%"},backgroundColor:"var(--joy-palette-background-level1)",sliderColor:"var(--joy-palette-primary-500)",preload:"metadata",color:"var(--joy-palette-primary-500)"})}):(0,s.jsxs)(l.Z,{sx:{maxWidth:"60%",minWidth:"auto"},children:[(0,s.jsxs)(a.Z,{direction:"row",justifyContent:r?"end":"start",spacing:2,sx:{mb:.25},children:[e.senderName&&!r&&s.jsx(m.ZP,{level:"body-xs",sx:{fontWeight:"bold"},children:e.senderName}),s.jsx(m.ZP,{level:"body-xs",children:function(e){let t=new Date("number"==typeof e?1e3*e:e);return`${t.toLocaleDateString([],{day:"numeric",month:"long",year:"numeric"})} ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`}(o)})]}),"null"!=i&&i&&x?s.jsx(s.Fragment,{children:c?s.jsx(ed.Z,{sx:{maxWidth:600,flexGrow:1,minHeight:"200px"},children:s.jsx(ec.Z,{children:s.jsx("img",{loading:"lazy",alt:"Hello World!",src:`https://euphoria-messenger.uz:4000/${c}`,style:{objectFit:"contain",height:"100%",width:"100%",cursor:"pointer"},onClick:()=>window.open(`https://euphoria-messenger.uz:4000/${c}`,"_blank")})})}):s.jsx(d.Z,{variant:"outlined",sx:{px:1.75,py:1.25,borderRadius:"lg",borderTopRightRadius:r?0:"lg",borderTopLeftRadius:r?"lg":0},children:(0,s.jsxs)(a.Z,{direction:"row",spacing:1.5,alignItems:"center",onClick:()=>{u.socket.emit("getFile",{userId:e.userId,messageId:e.id})},sx:{cursor:"pointer"},children:[s.jsx(el.Z,{color:"primary",size:"lg",children:s.jsx(ea.Z,{})}),s.jsx("div",{children:s.jsx(m.ZP,{fontSize:"sm",children:w})})]})})}):(0,s.jsxs)(l.Z,{sx:{position:"relative"},onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[t?s.jsx(d.Z,{color:r?"primary":"neutral",variant:r?"solid":"soft",sx:{p:1.25,borderRadius:"lg",borderTopRightRadius:r?0:"lg",borderTopLeftRadius:r?"lg":0,backgroundColor:r?"var(--joy-palette-primary-solidBg)":"background.body"},children:s.jsx(m.ZP,{level:"body-sm",sx:{color:r?"var(--joy-palette-common-white)":"var(--joy-palette-text-primary)"},children:t})}):s.jsx(d.Z,{color:r?"primary":"neutral",variant:r?"solid":"soft",sx:{p:1.25,borderRadius:"lg",borderTopRightRadius:r?0:"lg",borderTopLeftRadius:r?"lg":0,backgroundColor:r?"var(--joy-palette-primary-solidBg)":"background.body"},children:s.jsx(m.ZP,{level:"body-sm",sx:{color:"var(--joy-palette-danger-solidBg)"},children:i&&x?i:"Сообщение не поддерживается в данной версии приложения"})}),(p||f||Z)&&s.jsx(a.Z,{direction:"row",justifyContent:r?"flex-end":"flex-start",spacing:.5,sx:{position:"absolute",top:"50%",p:1.5,...r?{left:0,transform:"translate(-100%, -50%)"}:{right:0,transform:"translate(100%, -50%)"}}})]})]})}function eh(e){let{variant:t}=e,[r,i]=n.useState(!1);return(0,s.jsxs)(l.Z,{sx:{maxWidth:"60%",minWidth:"auto"},children:[s.jsx(a.Z,{direction:"row",justifyContent:"space-between",spacing:2,sx:{mb:.25}}),s.jsx(l.Z,{sx:{position:"relative"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:s.jsx(ei.Z,{variant:"text",height:20,level:"h1"})})]})}function eg(e){let[t,r]=n.useState({userId:""}),[i,h]=n.useState([]),[g,m]=n.useState(),[j,f]=n.useState(!1),[y,Z]=n.useState(""),[v,w]=n.useState([]),[b,I]=n.useState(null),[S,C]=n.useState(!1),k=e=>{console.log("setSelectedUserId",e),console.log("dialogs",i);let t=i.find(t=>t.userId==e);console.log("chat",t),r(t)};n.useEffect(()=>{(0,J.$J)("can_write",I),(0,J.$J)("can_read_photo",C)},[]);let R=e=>{m(e=(0,c.Qc)(e)),h(t=>{let r=[...t],s=r.find(t=>t.userId===e.peerId.userId);return s?(s.message=e.message,s.date=e.date,s.unreadCount=s.unreadCount?s.unreadCount+1:1):r.unshift({userId:e.peerId.userId,title:e.peerId.name,phone:e.peerId.phone,message:e.message,date:e.date,unreadCount:1}),r}),w(t=>[...t,e])};return n.useLayoutEffect(()=>{e.socket.on("connection",()=>{f(!0)}),e.socket.on("dialogs",e=>{console.log(e),h(e)}),e.socket.on("getMessages",e=>{w(e)}),e.socket.on("newMessage",e=>{R(e)}),e.socket.on("getFile",e=>{window.open(e,"_blank")})},[]),n.useLayoutEffect(()=>{w([]),e.socket.emitWithAck("getMessages",{userId:t?.userId||t?.id},()=>{console.log("getMessages"),w([])})},[t]),(0,s.jsxs)(d.Z,{sx:{flex:1,width:"100%",mx:"auto",pt:{xs:"var(--Header-height)",sm:0},display:"grid",gridTemplateColumns:{xs:"1fr",sm:"minmax(min-content, min(30%, 400px)) 1fr"}},children:[(0,s.jsxs)(d.Z,{sx:{position:{xs:"fixed",sm:"sticky"},transition:"transform 0.4s, width 0.4s",zIndex:100,width:"400px",top:52},children:[(0,s.jsxs)(d.Z,{sx:{borderRight:"1px solid",borderColor:"divider",height:"calc(100dvh)",overflowY:"scroll"},children:[s.jsx(z,{}),s.jsx(p,{}),s.jsx(o.Z,{sx:{py:0,"--ListItem-paddingY":"0.75rem","--ListItem-paddingX":"1rem"},children:i.length?i.map(e=>e&&s.jsx(E,{title:e.title,phone:e.phone||e.description,message:e.message,date:new Date(+e.date),unreadCount:e.unreadCount,selected:!!t?.userId&&(!!e.userId||!!e.id)&&String(t.userId)===String(e.userId||e.id),setSelectedUserId:k,userId:e.userId?.toString()||e.id.toString(),status:e.status},e.userId?.toString())):s.jsx(eo,{})})]}),s.jsx(O,{socket:u.socket})]}),(0,s.jsxs)(d.Z,{sx:{height:{xs:"calc(100dvh)",lg:"100dvh"},display:"flex",flexDirection:"column",backgroundColor:"background.level3"},children:[s.jsx(l.Z,{sx:{display:"flex",flex:1,minHeight:0,px:2,py:3,overflowY:"scroll",flexDirection:"column-reverse"},children:(0,s.jsxs)(a.Z,{spacing:2,justifyContent:"flex-end",sx:{flex:1},children:[(!t?.userId||!t.id)&&s.jsx(s.Fragment,{children:s.jsx(l.Z,{sx:{width:"100%",flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:s.jsx(l.Z,{sx:{padding:"10px 20px",borderRadius:"50px",backgroundColor:"background.level2"},children:s.jsx(x.Z,{children:"Выберите, кому бы хотели написать"})})})}),v.length<1&&t?.userId&&s.jsx(s.Fragment,{children:s.jsx(eh,{variant:"received"})}),v.map((e,r)=>{let n=e.out;if(e.peerId.userId==t?.userId||e.peerId.chatId==Math.abs(t.userId))return s.jsx(a.Z,{direction:"row",spacing:2,flexDirection:n?"row-reverse":"row",children:s.jsx(ex,{variant:n?"sent":"received",...e,userId:t.userId,canReadPhoto:S})},r)})]})}),b&&t?.userId&&s.jsx(en,{textAreaValue:y,setTextAreaValue:Z,userId:t.userId,onSubmit:(t,r)=>{e.socket.emit("sendMessage",{message:t,userId:r}),Z(""),w(e=>[...e,{message:t,out:!0,date:new Date,peerId:{userId:r}}]),h(e=>{let s=[...e],n=s.find(e=>e.userId===r);return n?(n.message=t,n.date=new Date().toISOString(),n.unreadCount=0):s.unshift({userId:r,title:"User",phone:"Phone",message:t,date:new Date().toISOString(),unreadCount:0}),s})}})]}),s.jsx($,{isConnected:j,setIsConnected:f}),s.jsx(W,{newMessage:g,setNewMessage:m})]})}},73207:(e,t,r)=>{r.d(t,{Z:()=>c});var s=r(97247),n=r(28964),i=r.n(n),o=r(92810),l=r(76262),a=r(44974);let d=i().forwardRef(function(e,t){let{onChange:r,...n}=e;return s.jsx(o.oc,{...n,mask:"+998 (##) ###-##-##",definitions:{"#":/[0-9]/},onAccept:t=>r({target:{name:e.name,value:t}}),overwrite:!0})});function c(e){return s.jsx(l.ZP,{sx:{my:2},placeholder:"Номер телефона",value:e.phone,onChange:t=>e.setPhone(t.target.value),slotProps:{input:{component:d}},endDecorator:s.jsx(a.Z,{})})}},4872:(e,t,r)=>{r.d(t,{socket:()=>s});let s=(0,r(97294).io)("https://euphoria-messenger.uz:4000",{withCredentials:!0})},32282:(e,t,r)=>{r.d(t,{$J:()=>c,N5:()=>l});let s="zQp3JmO7XhC9WsE4LkZ1RxY8GtV2QwB6";function n(e){return new TextEncoder().encode(e)}async function i(e){let t=n(e);return crypto?.subtle?.importKey("raw",t,{name:"AES-GCM"},!1,["encrypt","decrypt"])}async function o(e){let t=await i(s),r=crypto.getRandomValues(new Uint8Array(12)),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,n(e)),l=new Uint8Array(r.length+o.byteLength);return l.set(r,0),l.set(new Uint8Array(o),r.length),btoa(String.fromCharCode(...l))}async function l(e,t,r=86400){let s=JSON.stringify(t),n=await o(s);document.cookie=`${e}=${n}; path=/; max-age=${r}`}async function a(e){try{var t;let r=await i(s),n=Uint8Array.from(atob(e),e=>e.charCodeAt(0)),o=n.slice(0,12),l=n.slice(12);return t=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},r,l),new TextDecoder().decode(t)}catch(e){return console.error("Error decrypting data:",e),null}}async function d(e){let t=document.cookie.split(";").find(t=>t.trim().startsWith(`${e}=`));if(!t)return null;let r=t.split("=")[1],s=await a(r);return s?JSON.parse(s):null}let c=async(e,t)=>{try{let r=await d("access");t(!!r&&r[e])}catch(e){console.error("Ошибка при получении доступа:",e),t(!1)}}}};